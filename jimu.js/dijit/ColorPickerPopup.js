// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),function(k,l,m,d,c,e,h,n,f,p,q){return k([l,m],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);
this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){f.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},enable:function(){this._ENABLE=!0;c.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;c.addClass(this.domNode,"disable")},isPartOfPopup:function(a){var b=this.tooltipDialog.domNode,b=a===b||c.isDescendant(a,b),g=null;this.picker&&this.picker.getPickerTooltipDialog&&(g=this.picker.getPickerTooltipDialog().domNode);
a=a===g||c.isDescendant(a,g);return b||a},hideTooltipDialog:function(){this._hideTooltipDialog()},_showTooltipDialog:function(){f.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){f.close(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var a=c.create("div");this.tooltipDialog=new n({content:a});c.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var b=new p({appearance:{showTransparent:!1,
showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0},recordUID:this.recordUID,onChange:d.hitch(this,function(a){a&&(a=new h(a),this.setColor(a),this.onChange(a))})});b.placeAt(a);b.startup();this.own(e(b,"jimuColorPicker-popupClose",d.hitch(this,function(){this._hideTooltipDialog()})));this.own(e(this.domNode,"click",d.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==this._ENABLE&&this._showTooltipDialog()})));this.own(e(document,
"click",d.hitch(this,function(a){this.isPartOfPopup(a.srcElement||a.target)||this._hideTooltipDialog()})));this.picker=b},setColor:function(a){if(a instanceof h){null===this.color&&!0===this.showLabel&&this._changeLabel(a);var b=a.toHex();this.color=a;c.setStyle(this.domNode,"backgroundColor",b);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(b,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},_changeLabel:function(a){c.empty(this.domNode);
c.create("span",{innerHTML:a.toHex(),className:"color-label",style:{color:q.invertColor(a.toHex())}},this.domNode)},onChange:function(a){a&&this.showLabel&&this._changeLabel(a)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(a){this.domNode.title=a},getTooltipDialog:function(){return this.tooltipDialog||null},isJimuColorPickerTooltipDialogOpened:function(){return this.picker.isJimuColorPickerTooltipDialogOpened()}})});