// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dojo/on".split(" "),function(g,e,b,h,k,l,m,f){return g([l,m,k],{baseClass:"layers-chooser-container set-btn",templateString:"\x3cdiv\x3e\x3c/div\x3e",nls:null,menuBox:{w:75,h:120},layerItems:[],enable:!0,postCreate:function(){this.labelNode=b.create("div",{"class":"label",innerHTML:this.nls.set},this.domNode);this.inherited(arguments)},startup:function(){this.setLayers(this.layers);
this.own(f(this.labelNode,"click",e.hitch(this,function(a){this.onBtnClick(a)})));this.enable?this.enableMeun():this.disableMeun();this.inherited(arguments)},destroy:function(){this.inherited(arguments);this.layerItems=null},getLayers:function(){var a={};h.forEach(this.layerItems,function(c){var d=b.getAttr(c,"data-id");c=b.hasClass(c,"selected");a[d]={visible:c}},this);return a},setLayers:function(a){this.layers=a;this.layerItems=[];this._initMeun()},_initMeun:function(){this.meun&&b.empty(this.meun);
this.meun=b.create("div",{"class":"meun-box hide"},this.domNode);b.create("div",{innerHTML:"For test\x3d\x3d\x3e Preview in the main map",style:"background-color: #24B5CC"},this.meun);for(var a in this.layers)this._createItem(a,this.layers[a])},_createItem:function(a,c){var d=b.create("div",{"class":"layer",innerHTML:a,"data-id":a},this.meun);!0===c.visible?this._selectItem(d,{noEvent:!0}):this._unSelectedItem(d,{noEvent:!0});this.own(f(d,"click",e.hitch(this,this._toggleSelectItme,d)));this.layerItems.push(d)},
_toggleSelectItme:function(a){b.hasClass(a,"selected")?this._unSelectedItem(a):this._selectItem(a)},_selectItem:function(a,c){b.addClass(a,"selected");c&&!0===c.noEvent||this.emit("change",this.getLayers())},_unSelectedItem:function(a,c){b.removeClass(a,"selected");c&&!0===c.noEvent||this.emit("change",this.getLayers())},onBtnClick:function(a){a.stopPropagation();a.preventDefault();b.hasClass(this.meun,"hide")?!1!==this.enable&&(this._setMenuPosition(),this._showMenu()):this._closeMenu()},enableMeun:function(){this.enable=
!0;b.addClass(this.labelNode,"enable")},disableMeun:function(){this.enable=!1;b.removeClass(this.labelNode,"enable")},_setMenuPosition:function(){var a=b.position(this.domNode);0>a.y-this.menuBox.h-2&&b.setStyle(this.meun,{top:"27px",bottom:"auto"});var c=b.getMarginBox(this.domNode);window.isRTL?0>a.x-this.menuBox.w&&b.setStyle(this.meun,{left:0}):a.x+this.menuBox.w>c.w&&b.setStyle(this.meun,{right:0})},_showMenu:function(){b.removeClass(this.meun,"hide");this.emit("open")},_closeMenu:function(){b.addClass(this.meun,
"hide");this.emit("close")}})});