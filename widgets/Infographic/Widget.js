// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-geometry dojo/dom-class dojo/Evented dojo/debounce".split(" "),function(q,l,k,n,b,c,g,f){return q([n,g],{baseClass:"jimu-dijit-gridlayout",declaredClass:"jimu.dijit.GridLayout",container:null,layoutDefinition:null,components:null,editable:!1,_layout:null,_coordinates:null,postCreate:function(){this.inherited(arguments);this._coordinates={};var b={settings:{hasHeaders:!1,
resizeEnabled:this.editable,reorderEnabled:this.editable,selectionEnabled:this.editable},dimensions:{borderWidth:1,dragProxyWidth:0,dragProxyHeight:0},content:this.layoutDefinition};require(["libs/goldenlayout/goldenlayout"],l.hitch(this,function(h){this._layout=new h(b,this.container);this._layout.registerComponent("jimu grid",l.hitch(this,function(a,d){var h;a.parent.config.id=d.id;k.some(this.components,function(b){if(b.id===d.id)return h=b.dijit,a.getElement().html(b.dijit.domNode),!0},this);
a.on("resize",f(l.hitch(this,function(){0<a.width&&0<a.height&&h&&"function"===typeof h.resize&&h.resize(a.width,a.height)}),200));a.on("select",l.hitch(this,function(){this.editable&&a.parent.select();this.emit("mask-click",a.parent.config.id)}))}));this._layout.on("initialised",l.hitch(this,function(){this._resetCoordinate();this.emit("initialised")}));this._layout.on("stateChanged",l.hitch(this,function(){this._resetCoordinate()}));this._layout.init();this.editable||c.add(this._layout.root.childElementContainer[0],
"viewonly");c.add(this._layout.root.childElementContainer[0],"jimu-dijit-gridlayout");setTimeout(l.hitch(this,this.resize),100)}))},destroy:function(){k.forEach(this.components,function(b){b.dijit.destroy()});this._layout.destroy();this.inherited(arguments)},getLayoutDefinition:function(){return this._layout.toConfig().content},resize:function(){var c=b.getMarginBox(this.container);this._layout.updateSize(c.w,c.h)},getComponentSize:function(b){return(b=this._layout.root.contentItems[0].getItemsById(b))&&
0<b.length?(b=b[0].container,{w:b.width,h:b.height}):{w:0,h:0}},getSize:function(){return{w:this._layout.width,h:this._layout.height}},setVisible:function(b,h){var a=this._layout.root.contentItems[0].getItemsById(b);a&&0<a.length&&!1===h?this._hideComponent(a[0]):a&&0!==a.length||!0!==h||this._showComponent(b)},_hideComponent:function(b){b.parent&&b.parent.removeChild(b,!0)},_showComponent:function(b){var h,a,d,c,p,r,f;k.some(this.components,function(a){if(a.id===b)return h=a,!0},this);h&&(c={id:b,
type:"component",componentName:"jimu grid",componentState:{id:b}},a=this._coordinates[b],p=this._layout.root,a?(a[0].type!==p.contentItems[0].type&&(r=p.contentItems[0],p.replaceChild(r,{type:a[0].type,content:[]}),p.contentItems[0].addChild(r)),d=p,k.forEach(a,function(a){f=a.index<=d.contentItems.length?a.index:d.contentItems.length;"component"===a.type?d.addChild(c,f):("stack"!==a.type&&d.contentItems[a.index].type===a.type||d.addChild({type:a.type,content:[]},f),d=d.contentItems[f])},this)):("stack"===
p.contentItems[0].type&&(r=p.contentItems[0],p.replaceChild(r,{type:"column",content:[]}),p.contentItems[0].addChild(r)),p.contentItems[0].addChild(c)))},_resetCoordinate:function(){var b=this._layout.root.getItemsByType("component"),h=function(a,d){var b=a.parent;b&&(k.some(b.contentItems,function(b,h){if(b===a)return d.push({type:b.type,index:h}),!0}),h(b,d))};k.forEach(b,function(a){var d=[];h(a,d);this._coordinates[a.config.id]=d.reverse()},this)}})})},"widgets/Infographic/DijitFactory":function(){define("dojo/aspect dojo/_base/lang ./dijits/TextDijit ./dijits/ImageDijit ./dijits/ChartDijit ./dijits/GaugeDijit ./dijits/NumberDijit".split(" "),
function(q,l,k,n,b,c,g){var f={},m={},h=null,a=null,d=null,e=null,p={};f._dijits=m;f.createDijit=function(r){if(m[r.id])return m[r.id];var f;switch(r.type){case "text":f=k;break;case "image":f=n;break;case "chart":f=b;break;case "gauge":f=c;break;case "number":f=g}if(!f)return console.error("Unknow type:",r.type),null;var w={nls:h,config:r.config,map:a,inSettingPage:d,appConfig:e,jsonId:r.id};l.mixin(w,p);f=new f(w);q.after(f,"destroy",function(){delete m[r.id]});return m[r.id]=f};f.setNls=function(a){h=
a};f.setMap=function(d){a=d;Object.keys(m).forEach(function(d){m[d].setMap(a)})};f.setInSettingPage=function(a){d=a;Object.keys(m).forEach(function(a){m[a].setInSettingPage(d)})};f.setAppConfig=function(a){e=a;Object.keys(m).forEach(function(a){m[a].setAppConfig(e)})};f.setContext=function(a){p=a;Object.keys(m).forEach(function(a){l.mixin(m[a],p)})};return f})},"widgets/Infographic/dijits/TextDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(q,
l,k,n){return q([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"text",config:null,postCreate:function(){this.setConfig(this.config)},setConfig:function(b){this.config=b;l.empty(this.domNode);l.addClass(this.domNode,"table-layout-container");l.addClass(this.domNode,"no-trim");this.innerDom=l.create("div",{},this.domNode);l.place(this.innerDom,this.domNode);b={};n.background.setStyle(this.config.background,b,this);n.font.setStyle(this.config.font,b);n.font.setText(this.config,this);l.setStyle(this.innerDom,
b)}})})},"widgets/Infographic/dijits/BaseDijit":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","../utils"],function(q,l,k,n){return q([l,k],{templateString:"\x3cdiv\x3ePlease create a sub class\x3c/div\x3e",type:"BaseDijit",config:null,inSettingPage:!0,appConfig:null,constructor:function(b){this.config=b.config},setInSettingPage:function(b){this.inSettingPage=b},setConfig:function(b){this.config=b},setMap:function(b){this.map=b},setDataSource:function(b){n.checkDSIsVaild(b,
this.map,this.appConfig)&&(this.dataSource=b)},resize:function(){},setAppConfig:function(b){this.appConfig=b},onDataSourceDataUpdate:function(b){this.data=b},isDarkTheme:function(){var b=!1;this.appConfig&&("DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(b=!0):b=!0);return b}})})},"widgets/Infographic/utils":function(){define([],function(){return{checkDSIsVaild:function(q,
l,k){var n=!0;q?"DATA_SOURCE_FROM_FRAMEWORK"===q.dataSourceType?k&&k.dataSource&&k.dataSource.dataSources?k.dataSource.dataSources[q.frameWorkDsId]||(n=!1):n=!1:"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===q.dataSourceType&&((q=q.layerId)&&l?l.getLayer(q)||(n=!1):n=!1):n=!1;return n}}})},"widgets/Infographic/dijits/styleUtils":function(){define(["dojo/on","dojo/_base/lang","jimu/utils"],function(q,l,k){var n={background:{setStyle:function(b,c,g){if(!b)return{};c||(c={});n.background.setBackgroundColor(b,
c);n.background.setAlignment(b,c);n.background.setLink(b,c,g)},setBackgroundColor:function(b,c){b.backgroundColor&&(c.backgroundColor=b.backgroundColor)},setAlignment:function(b,c){if(b.alignment){if(b.alignment.horizontal)switch(b.alignment.horizontal){case "left":c.textAlign="left";break;case "center":c.textAlign="center";break;case "right":c.textAlign="right";break;default:c.textAlign="center"}if(b.alignment.vertical)switch(c.display="table-cell",b.alignment.vertical){case "top":c.verticalAlign=
"top";break;case "middle":c.verticalAlign="middle";break;case "bottom":c.verticalAlign="bottom";break;default:c.verticalAlign="middle"}}},setLink:function(b,c,g){g.clickHanlder&&(g.clickHanlder[0]&&g.clickHanlder[0].remove(),g.clickHanlder=null,c.cursor="auto");b.link&&(g.clickHanlder=g.own(q(g.domNode,"click",l.hitch(g,function(){window.open(b.link)}))),c.cursor="pointer")}},font:{setText:function(b,c){var g="";b.text&&(g=b.text);c.innerDom.innerHTML=g},setStyle:function(b,c){if(!b)return{};c||(c=
{});n.font.setFont(b,c);n.font.setTextColor(b,c);n.font.setFontSize(b,c)},setFont:function(b,c){c.fontWeight="normal";c.fontStyle="normal";c.textDecoration="none";b.font&&(b.font.fontFamily&&(c.fontFamily=b.font.fontFamily),b.font.bold&&(c.fontWeight="bold"),b.font.italic&&(c.fontStyle="italic"),b.font.underline&&(c.textDecoration="underline"))},setTextColor:function(b,c){b.textColor&&(c.color=b.textColor)},setFontSize:function(b,c){b.fontSize&&(c.fontSize=b.fontSize+"px")}},image:{setStyle:function(b,
c,g){if(!b)return{};c||(c={});n.image.setBackgroundImg(b,c,g);n.image.setAlignment(b,c)},setBackgroundImg:function(b,c,g){var f="";if(f=b&&!b.image&&g&&g.folderUrl?"url("+g.folderUrl+"/images/default_image.png)":"url("+k.processUrlInWidgetConfig(b.image,g.folderUrl)+")")c.backgroundImage=f,c.backgroundRepeat="no-repeat",c.backgroundSize="contain"},setAlignment:function(b,c){if(b&&b.background){var g="center",f="center";if(b.background.alignment){b.background.alignment.horizontal&&(g=b.background.alignment.horizontal);
if(b.background.alignment.vertical)switch(b.background.alignment.vertical){case "top":f="top";break;case "middle":f="center";break;case "bottom":f="bottom";break;default:c.verticalAlign="center"}c.backgroundPosition=g+" "+f}}}},dataFormat:{getText:function(b,c){var g="";b.dataFormat&&(g=c?c:b.text,g=n.dataFormat.setDataFomat(b,g),b.dataFormat.prefix&&(g=b.dataFormat.prefix+" "+g),b.dataFormat.suffix&&(g=g+" "+b.dataFormat.suffix));return g},setDataFomat:function(b,c){var g=b.dataFormat.unit;"none"===
b.dataFormat.unit?g="":"percentage"===b.dataFormat.unit&&(g="%");return c=c+g+"("+b.dataFormat.decimalPlaces+") "}}};return n})},"widgets/Infographic/dijits/ImageDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(q,l,k,n){return q([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"image",config:null,constructor:function(b){this.config=b.config},postCreate:function(){this.setConfig(this.config)},setConfig:function(b){this.config=b;this.domNode.innerHTML=
"";l.addClass(this.domNode,"table-layout-container");this.innerDom=l.create("div",{"class":"image-node"},this.domNode);l.place(this.innerDom,this.domNode);b={};n.background.setStyle(this.config.background,b,this);n.image.setStyle(this.config,b,this);l.setStyle(this.innerDom,b)}})})},"widgets/Infographic/dijits/ChartDijit":function(){define("dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./BaseDijit moment/moment jimu/dijit/StatisticsChart jimu/DataSourceManager jimu/LayerInfos/LayerInfos".split(" "),
function(q,l,k,n,b,c,g,f,m){window.makeTwix(c);return n([b],{templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv" class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3c/div\x3e',type:"chart",baseClass:"infographic-chart-dijit",layerInfosObj:null,dataSourceManager:null,featuresCountForPreview:50,dataSource:null,config:null,map:null,dataSourceType:"",featureLayer:null,constructor:function(b){this.config=b.config;this.layerInfosObj=m.getInstanceSync();this.dataSourceManager=f.getInstance()},
postCreate:function(){this.inherited(arguments);this.domNode.style.width="100%";this.domNode.style.height="100%";var b={_legendNls:this.nls.legend,theme:this._getChartTheme(),map:null,isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1};this.inSettingPage||(b.map=this.map);this.chart=new g(b);this.chart.placeAt(this.domNode);this._updateBackgroundColor()},_getChartTheme:function(){return this.isDarkTheme()?"dark":"light"},clearChart:function(){this._showNodata()},startup:function(){this.inherited(arguments);
setTimeout(q.hitch(this,function(){this.chart.resizeByParent();this.inSettingPage?this._tryUpdateStatisticsChart():this.dataSource&&this.setDataSource(this.dataSource)}),200)},destroy:function(){this.chart&&this.chart.destroy();this.chart=null;this.inherited(arguments)},resize:function(){this.chart&&this.chart.resizeByParent()},setDataSource:function(b){this.dataSourceType="";this.featureLayer=null;this.inherited(arguments);if(b)if(b.layerId)this._setDataSourceForLayerId(b);else if(b.frameWorkDsId){var a=
this._getDsTypeInfoAndDsMeta(b.frameWorkDsId),d=a.dsTypeInfo,a=a.dsMeta;d&&a&&("Features"===a.type?this._setDataSourceForFrameworkFeatures(b,d,a):"FeatureStatistics"===a.type&&this._setDataSourceForFeatureStatistics(b,d,a))}},_getDsTypeInfoAndDsMeta:function(b){var a={dsTypeInfo:null,dsMeta:null};a.dsTypeInfo=this.dataSourceManager.parseDataSourceId(b);var d=this.appConfig.dataSource&&this.appConfig.dataSource.dataSources;d&&(a.dsMeta=d[b]);return a},_updateBackgroundColor:function(){this.config&&
this.config.backgroundColor&&this.setBackgroundColor(this.config.backgroundColor)},setBackgroundColor:function(b){this.domNode.style.backgroundColor=b},setConfig:function(b){this.config=b;this._updateBackgroundColor();this._tryUpdateStatisticsChart()},onDataSourceDataUpdate:function(b){this.inherited(arguments);"CLIENT_FEATURES"===this.dataSourceType?this._onDataUpdateForClientFeatures(b):"FRAMEWORK_STATISTICS"===this.dataSourceType?this._onDataUpdateForFrameworkStatistics(b):"FRAMEWORK_FEATURES"===
this.dataSourceType&&this._onDataUpdateForFrameworkFeatures(b)},_tryUpdateStatisticsChart:function(){this._hideNodata();var b=this._getChartConfigFromConfig();b?this.domNode.parentNode?this.data?(this.data.features||(this.data.features=[]),"CLIENT_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForClientFeatures(b):"FRAMEWORK_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForFrameworkFeatures(b):"FRAMEWORK_STATISTICS"===this.dataSourceType&&this._tryUpdateStatisticsChartForFrameworkStatistics(b)):
this._showNodata():this._showNodata():this._showNodata()},_getNodataTextColor:function(){var b="";this.config&&(b="pie"===this.config.type?this.config.dataLabelColor:this.config.horizontalAxisTextColor||this.config.verticalAxisTextColor);b||(b="#666");return b},_getChartConfigFromConfig:function(){var b=null;if(this.config&&this.config.mode&&this.config.type){var b=q.clone(this.config),a=b.type,d=["backgroundColor","colors","showLegend","legendTextColor"],d="pie"===a?d.concat(["showDataLabel","dataLabelColor"]):
d.concat(["showHorizontalAxis","horizontalAxisTextColor","showVerticalAxis","verticalAxisTextColor"]),c={};b.types=[{type:a,display:c}];k.forEach(d,q.hitch(this,function(a){c[a]=b[a];delete b[a]}))}return b},_hasFeatures:function(){return this.data&&this.data.features&&0<=this.data.features.length},_showNodata:function(b){l.addClass(this.domNode,"no-data");"max"===b&&(this.noDataDiv.innerHTML="Failed to compute. Too many time intervals due to the short parsing period.");this.chart.clear()},_hideNodata:function(){l.removeClass(this.domNode,
"no-data")},_showMockData:function(b){b=q.clone(b);var a=[];b.labelField&&a.push(b.labelField);b.categoryField&&a.push(b.categoryField);b.valueFields&&(a=a.concat(b.valueFields));var d={fields:[]},c={attributes:{}};d.fields=k.map(a,q.hitch(this,function(a){c.attributes[a]=0;return{name:a,type:"esriFieldTypeInteger",alias:a}}));this.chart.resizeByParent();if(this._checkIsMaxLabels([c],b))return this._showNodata("max");this.chart.createClientCharts(d,[c],b,this.popupFieldInfosObj)},_setDataSourceForLayerId:function(b){this.dataSourceType=
"CLIENT_FEATURES";var a=this.layerInfosObj.getLayerInfoById(b.layerId);a&&a.getLayerObject().then(q.hitch(this,function(d){this.popupFieldInfosObj=a.getPopupInfo();this.featureLayer=d;this._tryUpdateStatisticsChart()}))},_onDataUpdateForClientFeatures:function(){this._tryUpdateStatisticsChart()},_tryUpdateStatisticsChartForClientFeatures:function(b){if(this.featureLayer){var a=this.data.features;a&&this.inSettingPage&&(a=a.slice(0,this.featuresCountForPreview));this.chart.resizeByParent();if(this._checkIsMaxLabels(a,
b))return this._showNodata("max");var d=this._getFeatureLayerForSymbolRenderChart();this.chart.createClientCharts(this.featureLayer,a,b,this.popupFieldInfosObj,d)}else this._showNodata()},_setDataSourceForFrameworkFeatures:function(){this.dataSourceType="FRAMEWORK_FEATURES";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkFeatures:function(){this._tryUpdateStatisticsChart()},_getFeatureLayerForSymbolRenderChart:function(b){var a=null;this.map&&"undefined"!==typeof b?a=this.map.getLayer(b):
this.featureLayer&&(a=this.featureLayer);return a},_tryUpdateStatisticsChartForFrameworkFeatures:function(b){var a=this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;if(a){var d=this.data.features;d&&this.inSettingPage&&(d=d.slice(0,this.featuresCountForPreview));this.chart.resizeByParent();if(this._checkIsMaxLabels(d,b))return this._showNodata("max");var c=null;if("undefined"!==b.useLayerSymbology){var h=this.dataSourceManager.parseDataSourceId(a.id);"undefined"!==typeof h.layerId&&
(c=this._getFeatureLayerForSymbolRenderChart(h.layerId))}this.chart.createClientCharts(a.dataSchema,d,b,this.popupFieldInfosObj,c)}else this._showNodata()},_setDataSourceForFeatureStatistics:function(){this.dataSourceType="FRAMEWORK_STATISTICS";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkStatistics:function(){this._tryUpdateStatisticsChart()},_tryUpdateStatisticsChartForFrameworkStatistics:function(b){var a=this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;if(a){this.chart.resizeByParent();
if(this._checkIsMaxLabels(this.data.features,b))return this._showNodata("max");this.chart.createServerStatisticsCharts(a.dataSchema,this.data.features,b)}else this._showNodata()},_checkIsMaxLabels:function(b,a){var d=a.dateConfig;if(!d||"automatic"===d.minPeriod)return!1;var e=a.categoryField,h=b.map(q.hitch(this,function(a){return a.attributes[e]})),h=h.filter(function(a){return!!a}),f=Math.min.apply(Math,h),h=Math.max.apply(Math,h),f=c(f).subtract(1,"seconds").local(),h=c(h).add(1,"seconds").local();
return 1E4<=Math.round(h.diff(f,d.minPeriod,!0))}})})},"jimu/dijit/StatisticsChart":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dijit/popup dijit/_WidgetBase dijit/TooltipDialog dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/StatisticsChart.html esri/lang esri/graphic esri/graphicsUtils esri/symbols/jsonUtils esri/layers/FeatureLayer jimu/utils jimu/clientStatisticsUtils jimu/dijit/Chart jimu/dijit/_StatisticsChartSettings jimu/dijit/LoadingIndicator".split(" "),
function(q,l,k,n,b,c,g,f,m,h,a,d,e,p,r,A,w,B,x,y,t,z,D,E){return n([a,e,p,l],{baseClass:"jimu-dijit-statistics-chart",templateString:r,theme:"light",noMoreThanOneChartClassName:"no-more-than-one-chart",hasTitleClassName:"has-title",charts:null,paramsDijits:null,tooltipDialogs:null,currentChartIndex:-1,tempGraphics:null,maxPreviewFeaturesCount:20,tooltipColor:"green",floatNumberFieldDecimalPlace:null,popupFieldInfosObj:null,config:null,features:null,featureLayer:null,map:null,fontColor:"#333333",isBigPreview:!1,
showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1,initialChartIndex:0,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];this.isBigPreview&&(this.showZoomIcon=!1)},postCreate:function(){this.inherited(arguments);this.showSettingIcon?this.own(q(document.body,"click",b.hitch(this,this._onDocumentBodyClick))):g.destroy(this.settingsIcon);this.showZoomIcon?this.own(q(this.zoominIcon,"click",b.hitch(this,function(){this.emit("zoomin")}))):
g.destroy(this.zoominIcon);this.isBigPreview&&(this.chartContainer.style.maxHeight="auto",g.addClass(this.domNode,"big-preview"));this.zoominIcon.title=this.nls.enlarge;this.settingsIcon.title=this.nls.setting;g.addClass(this.domNode,this.noMoreThanOneChartClassName)},destroy:function(){this.clear();this.inherited(arguments)},resize:function(a,d){if(0<a||"string"===typeof a&&0<a.length)this.domNode.style.width=a;if(0<d||"string"===typeof d&&0<d.length)this.domNode.style.height=d;this._resize()},resizeByParent:function(){this.domNode.style.width=
"100%";this.domNode.style.height="100%";this._resize()},_resize:function(){this._calculateChartBox();0<=this.currentChartIndex&&this._showChart(this.currentChartIndex)},createServerStatisticsCharts:function(a,d,e){var h=a.fields,u={type:"Table",fields:[]},p=b.clone(e),f=e.mode;"category"===f?(p.valueFields=[],u.fields=c.map(e.valueFields,b.hitch(this,function(a){var d=e.operation;"average"===d&&(d="avg");var b=a+"_"+d;a=a+"_"+d;p.valueFields.push(b);return{name:b,type:"esriFieldTypeDouble",alias:a}})),
c.some(h,b.hitch(this,function(a){return a.name===e.categoryField?(u.fields.push(a),!0):!1}))):"count"===f?(p.mode="feature",p.labelField=e.categoryField,a=a.fields[0].name+"_count",p.valueFields=[a],c.some(h,b.hitch(this,function(a){return a.name===e.categoryField?(u.fields.push(a),!0):!1})),u.fields.push({name:a,type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===f&&(p.valueFields=[],u.fields=c.map(e.valueFields,b.hitch(this,function(a){var d=e.operation;"average"===d&&(d="avg");var b=
a+"_"+d;a=a+"_"+d;p.valueFields.push(b);return{name:b,type:"esriFieldTypeDouble",alias:a}})));return this._getLoadedLayer(u).then(b.hitch(this,function(a){this._createChartsAsync({featureLayer:a,features:d,config:p})}))},createClientCharts:function(a,d,c,e,h){h&&(this.featureLayerForChartSymbologyChart=h);return this._getLoadedLayer(a).then(b.hitch(this,function(a){this._createChartsAsync({featureLayer:a,features:d,config:c,popupFieldInfosObj:e})}))},_getLoadedLayer:function(a){var d=new k,c=null,
c="string"===typeof a?new y(a):"esri.layers.FeatureLayer"===a.declaredClass?a:new y({layerDefinition:b.clone(a),featureSet:null});c.loaded?d.resolve(c):this.own(q(c,"load",b.hitch(this,function(){d.resolve(c)})));return d},_createChartsAsync:function(a){setTimeout(b.hitch(this,function(){this._createCharts(a)}),0)},_createCharts:function(a){try{this.loading.hide();this.clear();var e=!1;a.features&&(e=!!a.features.isSelectedFeatures,a.features=c.filter(a.features,b.hitch(this,function(a){return!!a.attributes})));
this.config=a.config;this.features=a.features;this.featureLayer=a.featureLayer;this.popupFieldInfosObj=a.popupFieldInfosObj?a.popupFieldInfosObj:{};this.config.highLightColor||(this.config.highLightColor=e?"#ff0000":"#00ffff");this._calculateDecimalPlaceForFloatField();this.chartTitle.innerHTML=t.stripHTML(this.config.name||"");this.chartTitle.title=this.chartTitle.innerHTML;this.chartTitle.title?g.addClass(this.domNode,this.hasTitleClassName):g.removeClass(this.domNode,this.hasTitleClassName);1>=
a.config.types.length?g.addClass(this.domNode,this.noMoreThanOneChartClassName):g.removeClass(this.domNode,this.noMoreThanOneChartClassName);var h=this._calculateChartBox(),u=h.w+"px",p=h.h+"px",f=c.map(a.config.types,b.hitch(this,function(a){var d=g.create("div",{"class":"chart-div",style:{width:u,height:p}},this.chartContainer),b=g.toDom("\x3cli class\x3d'paging-li'\x3e\x3ca class\x3d'paging-a'\x3e\x3c/a\x3e\x3c/li\x3e");g.place(b,this.pagingUl);b=a.type;a=a.display;a.backgroundColor||(a.backgroundColor=
"transparent");a.hasOwnProperty("showLegend")||(a.showLegend=!1);a.legendTextColor||(a.legendTextColor=this.fontColor);"pie"===b?(a.hasOwnProperty("showDataLabel")||(a.showDataLabel=!0),a.dataLabelColor||(a.dataLabelColor=this.fontColor)):(a.hasOwnProperty("showHorizontalAxis")||(a.showHorizontalAxis=!0),a.horizontalAxisTextColor||(a.horizontalAxisTextColor=this.fontColor),a.hasOwnProperty("showVerticalAxis")||(a.showVerticalAxis=!0),a.verticalAxisTextColor||(a.verticalAxisTextColor=this.fontColor));
return d})),e=null;"feature"===this.config.mode?e=this._createFeatureModeCharts(a,f):"category"===this.config.mode?e=this._createCategoryModeCharts(a,f):"count"===this.config.mode?e=this._createCountModeCharts(a,f):"field"===this.config.mode&&(e=this._createFieldModeCharts(a,f));this.charts=e.charts;this.paramsDijits=e.paramsDijits;this.tooltipDialogs=c.map(this.paramsDijits,b.hitch(this,function(a){var b=g.create("div");a.placeAt(b);return new d({content:b})}));a=0;0<=this.initialChartIndex&&this.charts.length>=
this.initialChartIndex+1&&(a=this.initialChartIndex);this._showChart(a)}catch(C){console.error(C)}},_calculateChartBox:function(){var a=g.getContentBox(this.domNode),d=a.h;0<this.resultsHeader.clientHeight&&(d=g.getMarginBox(this.resultsHeader),d=a.h-d.h);a=60;d<a&&(a=d);g.setStyle(this.leftArrow,"height",a+"px");g.setStyle(this.rightArrow,"height",a+"px");g.setStyle(this.chartContainer,"height",d+"px");return g.getContentBox(this.chartContainer)},_calculateDecimalPlaceForFloatField:function(){this.floatNumberFieldDecimalPlace=
{};var a=[];this.config.labelField&&a.push(this.config.labelField);this.config.categoryField&&a.push(this.config.categoryField);this.config.valueFields&&(a=a.concat(this.config.valueFields));var d=c.filter(a,b.hitch(this,function(a){return this._isFloatNumberField(a)})),e={};c.forEach(d,b.hitch(this,function(a){e[a]=[]}));(a=this.features)&&0<a.length&&c.forEach(a,b.hitch(this,function(a){var h=a.attributes;h&&c.forEach(d,b.hitch(this,function(a){var d=h[a];"number"===typeof d&&e[a].push(d)}))}));
c.forEach(d,b.hitch(this,function(a){this.floatNumberFieldDecimalPlace[a]=0;var d=e[a];if(0<d.length)try{var b=this._getBestDecimalPlace(d);this.floatNumberFieldDecimalPlace[a]=b}catch(C){this.floatNumberFieldDecimalPlace[a]=0,console.error(C)}this.popupFieldInfosObj&&(d=this.popupFieldInfosObj[a])&&d.format&&0<=d.format.places&&(this.floatNumberFieldDecimalPlace[a]=d.format.places)}))},_onDocumentBodyClick:function(a){if(0<=this.currentChartIndex&&this.tooltipDialogs){var d=this.tooltipDialogs[this.currentChartIndex];
if(d){var b=!!d.isOpendNow;this._hideAllTooltipDialogs();var c=a.target||a.srcElement;c===this.leftArrow||c===this.rightArrow||g.hasClass(c,"paging-a")||g.hasClass(c,"paging-li")||(c===this.settingsIcon?b?this._hideTooltipDialog(d):this._showTooltipDialog(d):(a=c===d.domNode,c=g.isDescendant(c,d.domNode),a||c?b?this._showTooltipDialog(d):this._hideTooltipDialog(d):this._hideTooltipDialog(d)))}else this._hideAllTooltipDialogs()}else this._hideAllTooltipDialogs()},clear:function(){this.featureLayer=
this.features=this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.currentChartIndex=-1;this.popupFieldInfosObj=this.floatNumberFieldDecimalPlace=null;f("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);this.paramsDijits||(this.paramsDijits=[]);this.tooltipDialogs||(this.tooltipDialogs=[]);for(var a=0;a<this.charts.length;a++)this.charts[a]&&this.charts[a].destroy(),this.charts[a]=null,this.paramsDijits[a]&&this.paramsDijits[a].destroy(),this.paramsDijits[a]=
null,this.tooltipDialogs[a]&&this.tooltipDialogs[a].destroy(),this.tooltipDialogs[a]=null;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];g.empty(this.pagingUl);g.empty(this.chartContainer);g.addClass(this.domNode,this.noMoreThanOneChartClassName)},_showChart:function(a){this.currentChartIndex=-1;var d=f(".chart-div",this.chartContainer);d.style({display:"none"});var b=f("li",this.pagingUl);b.removeClass("selected");if(!(0>a)){if(d=d[a])this.currentChartIndex=a,g.setStyle(d,"display","block");
(b=b[a])&&g.addClass(b,"selected");if(!this.isBigPreview&&(b=null,this.charts&&0<this.charts.length&&(b=this.charts[a]))){a=this._calculateChartBox();var c=g.getContentBox(d);if(a.w!==c.w||a.h!==c.h)this.loading.show(),c=a.w+"px",a=a.h+"px",g.setStyle(d,"width",c),g.setStyle(d,"height",a),b.resize(c,a),this.loading.hide()}}},_hideAllTooltipDialogs:function(){this.tooltipDialogs&&0<this.tooltipDialogs.length&&c.forEach(this.tooltipDialogs,b.hitch(this,function(a){this._hideTooltipDialog(a)}))},_hideTooltipDialog:function(a){a&&
(h.close(a),a.isOpendNow=!1)},_showTooltipDialog:function(a){a&&(h.open({popup:a,around:this.settingsIcon}),a.isOpendNow=!0)},_onPagingUlClicked:function(a){a.stopPropagation();this._hideAllTooltipDialogs();a=a.target||a.srcElement;if("a"===a.tagName.toLowerCase()){var d=f("a",this.pagingUl);a=c.indexOf(d,a);0<=a&&this._showChart(a)}},_onLeftArrowClicked:function(a){a.stopPropagation();this._hideAllTooltipDialogs();a=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},
_onRightArrowClicked:function(a){a.stopPropagation();this._hideAllTooltipDialogs();a=(this.currentChartIndex+1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},_getHighLightMarkerSymbol:function(){var a=x.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});a.setSize(30);a.outline.setColor(new m(this.config.highLightColor));return a},_getHighLightLineSymbol:function(a){var d=
x.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});d.setColor(new m(a||this.config.highLightColor));return d},_getDefaultHighLightFillSymbol:function(){var a=x.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});a.outline.setColor(new m(this.config.highLightColor));return a},_getHighLightFillSymbol:function(a,d,b){var c=null,e=d.symbol,c=a.renderer;!e&&c&&(e=c.getSymbol(d));
e&&"function"===typeof e.setOutline?(c=x.fromJson(e.toJson()),d=1.5,e.outline&&0<e.outline.width&&(d=e.outline.width+1),b=this._getHighLightLineSymbol(b?"#ff0000":"#00ffff"),b.setWidth(d),c.setOutline(b)):c=this._getDefaultHighLightFillSymbol();return c},_zoomToGraphics:function(a){if(this.map&&this.featureLayer&&this.featureLayer.visible&&a&&0<a.length){var d=null;try{var e=c.filter(a,function(a){return!!a.geometry});0<e.length&&(d=B.graphicsExtent(e))}catch(F){console.error(F)}if(d)this.map.setExtent(d.expand(1.4));
else if(a=(a=a[0])&&a.geometry)d=b.hitch(this,function(a){var d=this.map.getNumLevels(),c=this.map.getLevel();this.map.setLevel(Math.max(c,Math.floor(2*d/3))).then(b.hitch(this,function(){this.map.centerAt(a)}))}),"point"===a.type?d(a):"multipoint"===a.type&&1===a.points.length&&d(a.getPoint(0))}},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,
1);this.tempGraphics=null},_mouseOverChartItem:function(a){this._removeTempGraphics();c.forEach(a,b.hitch(this,function(a){a._originalSymbol=a.symbol}));if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var d=t.getTypeByGeometryType(this.featureLayer.geometryType),e=null;if("point"===d)e=this._getHighLightMarkerSymbol(),this.tempGraphics=[],c.forEach(a,b.hitch(this,function(a){a=new w(a.geometry,e);this.tempGraphics.push(a);this.featureLayer.add(a)}));else if("polyline"===
d)e=this._getHighLightLineSymbol(),c.forEach(a,b.hitch(this,function(a){a.setSymbol(e)}));else if("polygon"===d){var h=this.featureLayer.getSelectedFeatures()||[];c.forEach(a,b.hitch(this,function(a){var d=0<=h.indexOf(a),d=this._getHighLightFillSymbol(this.featureLayer,a,d);a.setSymbol(d)}));this.features.length!==a.length&&"polygon"===d&&(c.forEach(a,b.hitch(this,function(a){this.featureLayer.remove(a)})),c.forEach(a,b.hitch(this,function(a){this.featureLayer.add(a)})))}}},_mouseOutChartItem:function(a){this._removeTempGraphics();
c.forEach(a,b.hitch(this,function(a){a.setSymbol(a._originalSymbol||null)}))},_isNumber:function(a){return"[object number]"===Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(a,d){var c=a;if(A.isDefined(a)&&isFinite(a))try{var e;if(d&&this._isNumberField(d)){var h=this.popupFieldInfosObj[d];e=h&&b.exists("format.places",h)?t.localizeNumberByFieldInfo(a,h):t.localizeNumber(a)}else e=a;"string"===typeof e&&(c=e)}catch(G){console.error(G)}return c+""},_getBestDisplayValue:function(a,
d){var e=this._tryLocaleNumber(d,a);if(this.featureLayer.typeIdField===a){var h=this.featureLayer.types;if(h&&0<h.length&&(h=c.filter(h,b.hitch(this,function(a){return a.id===d})),0<h.length))return e=h[0].name}(h=this._getFieldInfo(a))&&h.domain&&(h=h.domain.codedValues)&&0<h.length&&c.some(h,function(a){return a.code===d?(e=a.name,!0):!1});return e},_getFieldAliasArray:function(a){return c.map(a,b.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAlias:function(a){var d=a;(a=this._getFieldInfo(a))&&
(d=a.alias||d);return d},_getFieldInfo:function(a){if(this.featureLayer)for(var d=this.featureLayer.fields,b=0;b<d.length;b++)if(d[b].name===a)return d[b];return null},_isNumberField:function(a){var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return c.some(this.featureLayer.fields,b.hitch(this,function(b){return b.name===a&&0<=d.indexOf(b.type)}))},_isFloatNumberField:function(a){var d=["esriFieldTypeSingle","esriFieldTypeDouble"];return c.some(this.featureLayer.fields,
b.hitch(this,function(b){return b.name===a&&0<=d.indexOf(b.type)}))},_isDateField:function(a){return(a=this._getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},_getBestDecimalPlace:function(a){var d=0,b={};c.forEach(a,function(a){a=a.toString().split(".");var d=null;1===a.length?d=0:2===a.length&&(d=a[1].length);null!==d&&(b[d]=void 0===b[d]?1:b[d]+1)});a=null;for(var e in b){e=parseInt(e,10);var h=b[e];a?h>a.value&&(a={key:e,value:h}):a={key:e,value:h}}a&&(d=parseInt(a.key,10));return d},_getFloatNumberFieldDecimalPlace:function(a){var d=
0;this.floatNumberFieldDecimalPlace&&(a=this.floatNumberFieldDecimalPlace[a],"number"===typeof a&&(d=a));return d},_getBestValueForFloatNumberField:function(a,d){var b=this._getFloatNumberFieldDecimalPlace(d),b=a.toFixed(b);return parseFloat(b)},_getColors:function(a,d){var c=[],e=b.clone(a);if(2===e.colors.length)c=this._createGradientColors(e.colors[0],e.colors[e.colors.length-1],d);else{for(var h=Math.ceil(d/e.colors.length),p=0;p<h;p++)c=c.concat(e.colors);c=c.slice(0,d)}return c},_createGradientColors:function(a,
d,b){var c=[];a=new m(a);var e=new m(d);d=(e.r-a.r)/b;for(var h=(e.g-a.g)/b,e=(e.b-a.b)/b,p=new m,f=0,r=0,g=0,k=0;k<b;k++)f=parseInt(a.r+d*k,10),r=parseInt(a.g+h*k,10),g=parseInt(a.b+e*k,10),p.setColor([f,r,g]),c.push(p.toHex());return c},_createParamsDijit:function(a,d){return new E({isInWidget:this.map?!0:!1,type:a,config:d})},_createJimuChart:function(a,d,c,e,h){var p=h.type,f=this._createParamsDijit(p,h.display),r=f.getConfig();r&&b.mixin(h.display,r);var g=this._getBasicChartOptionsByStatisticsInfo(d,
c,e,p);this._udpateJimuChartDisplayOptions(g,h);var k=new D({chartDom:a,config:g});k.placeAt(a);this._bindChartEvent(k,d,e);this.showSettingIcon&&this.own(q(f,"change",b.hitch(this,function(){f.showShelter();if(k){var a=f.getConfig();b.mixin(h.display,a);this._udpateJimuChartDisplayOptions(g,h);k.updateConfig(g)}f.hideShelter()})));return[k,f]},_udpateJimuChartDisplayOptions:function(a,d){var e=d.type,h=d.display,p={type:e,dataZoom:["inside","slider"],confine:!0,backgroundColor:h.backgroundColor,
color:h.colors,legend:h.showLegend,theme:this.theme||"light",advanceOption:function(a){h.showLegend&&a.legend&&(a.legend.textStyle||(a.legend.textStyle={}),a.legend.textStyle.color=h.legendTextColor);"pie"===e?a.series&&0<a.series.length&&c.forEach(a.series,b.hitch(this,function(a){"pie"===a.type&&(a.label||(a.label={}),a.label.normal||(a.label.normal={}),a.label.normal.show=h.showDataLabel,a.label.normal.textStyle||(a.label.normal.textStyle={}),a.label.normal.textStyle.color=h.dataLabelColor)})):
(a.xAxis||(a.xAxis={}),a.xAxis.axisLabel||(a.xAxis.axisLabel={}),a.xAxis.axisLabel.textStyle||(a.xAxis.axisLabel.textStyle={}),a.xAxis.axisLabel.textStyle.color=h.horizontalAxisTextColor,a.yAxis||(a.yAxis={}),a.yAxis.axisLabel||(a.yAxis.axisLabel={}),a.yAxis.axisLabel.textStyle||(a.yAxis.axisLabel.textStyle={}),a.yAxis.axisLabel.textStyle.color=h.verticalAxisTextColor)}};"pie"===e&&(p.labelLine=!!h.showDataLabel);b.mixin(a,p);"pie"!==e&&(a.axisPointer=!0,a.scale=!1,a.hidexAxis=!h.showHorizontalAxis,
a.hideyAxis=!h.showVerticalAxis);return a},_getBasicChartOptionsByStatisticsInfo:function(a,d,b,c){return"feature"===a||"category"===a?this._getCategoryModeChartOptionsByStatisticsInfo(d,b,c):"count"===a?this._getCountModeChartOptionsByStatisticsInfo(b,c):"field"===a?this._getFieldModeChartOptionByStatisticsInfo(b,c):null},_bindChartEvent:function(a,d,e){if(this.map&&0!==e.length){var h=b.hitch(this,function(a){if("series"===a.componentType){var b=null;(b="field"===d?this.features:e[a.dataIndex].dataFeatures)&&
("mouseover"===a.type?this._mouseOverChartItem(b):"mouseout"===a.type?this._mouseOutChartItem(b):"click"===a.type&&this.zoomToFeaturesWhenClick&&this._zoomToGraphics(b))}}),p=[{name:"mouseover",callback:h},{name:"mouseout",callback:h}];this.zoomToFeaturesWhenClick&&p.push({name:"click",callback:h});c.forEach(p,b.hitch(this,function(d){a.chart.on(d.name,d.callback)}))}},_createFeatureModeCharts:function(a,d){var e=[],h=[],p=a.config,f={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,
features:a.features,labelField:p.labelField,valueFields:p.valueFields,sortOrder:p.sortOrder,maxLabels:p.maxLabels,useLayerSymbology:p.useLayerSymbology};this.featureLayerForChartSymbologyChart&&(f.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var r=z.getFeatureModeStatisticsInfo(f);c.forEach(p.types,b.hitch(this,function(a,b){try{var c=this._createJimuChart(d[b],"feature",f,r,a);e.push(c[0]);h.push(c[1])}catch(v){console.error(v)}}));return{charts:e,paramsDijits:h}},
_createCategoryModeCharts:function(a,d){var e=[],h=[],p=a.config,f={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:a.features,categoryField:p.categoryField,valueFields:p.valueFields,operation:a.config.operation,sortOrder:p.sortOrder,dateConfig:p.dateConfig,maxLabels:p.maxLabels,nullValue:p.nullValue,useLayerSymbology:p.useLayerSymbology};this.featureLayerForChartSymbologyChart&&(f.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var r=
z.getCategoryModeStatisticsInfo(f);c.forEach(p.types,b.hitch(this,function(a,b){try{var c=this._createJimuChart(d[b],"category",f,r,a);e.push(c[0]);h.push(c[1])}catch(v){console.error(v)}}));return{charts:e,paramsDijits:h}},_getCategoryModeChartOptionsByStatisticsInfo:function(a,d,e){var h={type:e,labels:[],series:[]};a=this._getFieldAliasArray(a.valueFields);h.series=c.map(a,b.hitch(this,function(a){return{name:a,type:e,data:[]}}));c.forEach(d,b.hitch(this,function(a){h.labels.push(a.category);for(var b=
0;b<a.valueFields.length;b++){var c=a.valueFields[b];this._isAllFalseColor(d)||"undefined"!==typeof a.color&&(c=this._getSerieData(a,c));h.series[b].data.push(c)}}));return h},_isAllFalseColor:function(a){return a.every(function(a){return!a.color})},_getSerieData:function(a,d){a.color||(a.color="transparent",a.borderColor="#939393");var b={value:d,itemStyle:{normal:{color:a.color},emphasis:{color:a.color}}};a.borderColor&&(b.itemStyle.normal.borderColor=a.borderColor,b.itemStyle.emphasis.borderColor=
a.borderColor);return b},_createCountModeCharts:function(a,d){var e=[],h=[],p=a.config,f={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:a.features,categoryField:p.categoryField,sortOrder:p.sortOrder,dateConfig:p.dateConfig,maxLabels:p.maxLabels,useLayerSymbology:p.useLayerSymbology};this.featureLayerForChartSymbologyChart&&(f.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var r=z.getCountModeStatisticsInfo(f);c.forEach(p.types,b.hitch(this,
function(a,b){try{var c=this._createJimuChart(d[b],"count",f,r,a);e.push(c[0]);h.push(c[1])}catch(v){console.error(v)}}));return{charts:e,paramsDijits:h}},_getCountModeChartOptionsByStatisticsInfo:function(a,d){var e={type:d,labels:[],series:[{name:this._legendNls||"Legend",type:d,data:[]}]};c.forEach(a,b.hitch(this,function(d){var b=d.count;e.labels.push(d.fieldValue);this._isAllFalseColor(a)?e.series[0].data.push(b):"undefined"!==typeof d.color?(d=this._getSerieData(d,b),e.series[0].data.push(d)):
e.series[0].data.push(b)}));return e},_createFieldModeCharts:function(a,d){var e=[],h=[],p=a.config,f={layerDefinition:this.featureLayer,features:a.features,valueFields:p.valueFields,operation:p.operation,sortOrder:p.sortOrder,maxLabels:p.maxLabels,nullValue:p.nullValue},r=z.getFieldModeStatisticsInfo(f);c.forEach(p.types,b.hitch(this,function(a,b){try{var c=this._createJimuChart(d[b],"field",f,r,a);e.push(c[0]);h.push(c[1])}catch(v){console.error(v)}}));return{charts:e,paramsDijits:h}},_getFieldModeChartOptionByStatisticsInfo:function(a,
d){var e={type:d,labels:[],series:[{name:this._legendNls||"Legend",type:d,data:[]}]};c.forEach(a,b.hitch(this,function(a){var d=this._getFieldAlias(a.label);e.labels.push(d);e.series[0].data.push(a.value)}));return e}})})},"jimu/clientStatisticsUtils":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/config ./_dateFormat moment/moment jimu/utils esri/lang".split(" "),function(q,l,k,n,b,c,g,f){window.makeTwix(c);var m=q(null,{popupFieldInfosObj:null,constructor:function(b){b&&
k.mixin(this,b);this.popupFieldInfosObj||(this.popupFieldInfosObj={});this.floatNumberFieldDecimalPlace={}},_isNumber:function(b){return"[object number]"===Object.prototype.toString.call(b).toLowerCase()},_tryLocaleNumber:function(b,a){var d=b;if(f.isDefined(b)&&isFinite(b))try{var e;if(a&&this._isNumberField(a)){var c=this.popupFieldInfosObj[a];e=c&&k.exists("format.places",c)?g.localizeNumberByFieldInfo(b,c):g.localizeNumber(b)}else e=b;"string"===typeof e&&(d=e)}catch(r){console.error(r)}return d+
""},_getBestDisplayValue:function(b,a){return a||"number"===typeof a?this._isDateField(b)?this._dateFormatter(b,a):this._valueFormatter(b,a):"null"},_dateFormatter:function(b,a){var d;a:{if(this.popupFieldInfosObj&&f.isDefined(this.popupFieldInfosObj.fieldInfos)){d=0;for(var e=this.popupFieldInfosObj.fieldInfos.length;d<e;d++){var c=this.popupFieldInfosObj.fieldInfos[d];if(c.fieldName===b){d=c.format;break a}}}d=null}return g.fieldFormatter.getFormattedDate(a,d)},_valueFormatter:function(b,a){var d=
this._tryLocaleNumber(a,b);if(this.layerDefinition.typeIdField===b){var c=this.layerDefinition.types;if(c&&0<c.length&&(c=l.filter(c,k.hitch(this,function(d){return d.id===a})),0<c.length))return d=c[0].name}(c=this._getFieldInfo(b))&&c.domain&&(c=c.domain.codedValues)&&0<c.length&&l.some(c,function(b){return b.code===a?(d=b.name,!0):!1});return d},_getFieldAliasArray:function(b){return l.map(b,k.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAlias:function(b){var a=b;(b=this._getFieldInfo(b))&&
(a=b.alias||a);return a},_getFieldInfo:function(b){if(this.layerDefinition)for(var a=this.layerDefinition.fields,d=0;d<a.length;d++)if(a[d].name===b)return a[d];return null},_isNumberField:function(b){var a=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return l.some(this.layerDefinition.fields,k.hitch(this,function(d){return d.name===b&&0<=a.indexOf(d.type)}))},_isFloatNumberField:function(b){var a=["esriFieldTypeSingle","esriFieldTypeDouble"];return l.some(this.layerDefinition.fields,
k.hitch(this,function(d){return d.name===b&&0<=a.indexOf(d.type)}))},_isDateField:function(b){return(b=this._getFieldInfo(b))?"esriFieldTypeDate"===b.type:!1},_getBestDecimalPlace:function(b){var a=0,d={};l.forEach(b,function(a){a=a.toString().split(".");var b=null;1===a.length?b=0:2===a.length&&(b=a[1].length);null!==b&&(d[b]=void 0===d[b]?1:d[b]+1)});b=null;for(var c in d){c=parseInt(c,10);var h=d[c];b?h>b.value&&(b={key:c,value:h}):b={key:c,value:h}}b&&(a=parseInt(b.key,10));return a},_getFloatNumberFieldDecimalPlace:function(b){var a=
0;this.floatNumberFieldDecimalPlace&&(b=this.floatNumberFieldDecimalPlace[b],"number"===typeof b&&(a=b));return a},_getBestValueForFloatNumberField:function(b,a){if(null===b)return b;var d=this._getFloatNumberFieldDecimalPlace(a),d=b.toFixed(d);return parseFloat(d)},_convertToEchartsRbga:function(b){if(!b||"undefined"===typeof b.r)return b;b=JSON.parse(JSON.stringify(b));var a;a="rgba("+(b.r+",");a+=b.g+",";a+=b.b+",";return a+=b.a+")"},_addColorToChartData:function(b,a,d,c){return"feature"===b?this._addColorToFeatruesForFeatureMode(a,
d):"category"!==b&&"count"!==b?c:this._addColorToDataForCategoryCountMode(a,c)},_addColorToDataForCategoryCountMode:function(b,a){var d=b.renderer;return a=a.map(function(a){var b=a.dataFeatures[0];if(b){var c=this._getCategoryColor(d,b),b=null;"undefined"!==typeof c.color&&(a.color=c.color)}else a.color=!1;return a}.bind(this))},_getVisualVariableByType:function(b,a){if(a){var d=l.filter(a,function(a){return a.type===b&&!a.target});if(d.length)return d[0]}return null},_getCategoryColor:function(b,
a){var d=null,c={},d=this._getSymbolByRenderer(b,a),c=this._getColorFromSymbol(c,d),d=null;return c},_getSymbolByRenderer:function(b,a){var d=null,c=this._getVisualVariableByType("colorInfo",b.visualVariables);if(c){if(c=b.getColor(a,{colorInfo:c}))c=this._convertToEchartsRbga(c),d={color:c}}else d=b.getSymbol(a);d||(d={color:!1});return d},_getColorFromSymbol:function(b,a){a&&"undefined"!==typeof a.color&&(b.color=this._convertToEchartsRbga(a.color));return b},_addColorToFeatruesForFeatureMode:function(b,
a){if(!b||!Array.isArray(a))return a;var d=b.renderer;a.forEach(function(a){var b=null,c={};a.symbol&&a.symbol.color?b=a.symbol:d&&(b=this._getSymbolByRenderer(d,a));c=this._getColorFromSymbol(c,b);"undefined"!==typeof c.color&&(a.color=c.color);return a}.bind(this));return a},getFeatureModeStatisticsInfo:function(b){var a=b.features,d=b.labelField,c=b.valueFields,h=b.sortOrder,f=b.maxLabels,g=b.featureLayerForChartSymbologyChart;b=b.useLayerSymbology;var m=[],a=a.filter(function(a){var b=a.attributes[d];
if(b||"number"===typeof b)return!0;m.push(a)}).concat(m);b&&(a=this._addColorToChartData("feature",g,a));a=this._sortStatisticsInfo(a,"feature",h,d);h=[];h=l.map(a,k.hitch(this,function(a){var b=a.attributes,e={category:b[d],valueFields:[],dataFeatures:[a]};"undefined"!==typeof a.color&&(e.color=a.color,a.color=void 0);e.valueFields=l.map(c,k.hitch(this,function(a){return b[a]}));return e}));0<h.length&&h.forEach(k.hitch(this,function(a){a.category=this._getBestDisplayValue(d,a.category)}));return this._getDataForMaxLabels(h,
f)},getCategoryModeStatisticsInfo:function(b){function a(a){var d=[],b=null,e;for(e in a)b=a[e],this._isNumberField(c)&&"number"===typeof e&&f.isDefined(e)&&(e=parseFloat(e)),b.fieldsValues=l.map(h,k.hitch(this,function(a){var d=l.map(b.dataFeatures,k.hitch(this,function(d){return d.attributes[a]})),c;if(0!==d.length){c=0;"max"===r?c=-Infinity:"min"===r&&(c=Infinity);var d=B?d.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):d.filter(function(a){return this._isNumber(a)}.bind(this)),
e=0;l.forEach(d,k.hitch(this,function(a){e++;"average"===r||"sum"===r?c+=a:"max"===r?c=Math.max(c,a):"min"===r&&(c=Math.min(c,a))}));0<e?"average"===r&&(c/=e):c=null}else c=null;return{field:a,value:c}})),b.valueFields=l.map(b.fieldsValues,function(a){return a.value}),d.push({originValue:b.originValue,category:e,valueFields:b.valueFields,fieldsValues:b.fieldsValues,dataFeatures:b.dataFeatures});return d}var d=b.features,c=b.categoryField,h=b.valueFields,r=b.operation,g=b.sortOrder,m=b.maxLabels,B=
b.nullValue,n=b.featureLayerForChartSymbologyChart,y=b.useLayerSymbology,t=[],t=this.getCategoryOrCountHashObj(c,d,b.dateConfig);b=t.nullLabelHashObj;t=a.call(this,t.notNullLabelHashObj);b=a.call(this,b);t=t.concat(b);t=this._sortStatisticsInfo(t,"category",g);t=l.filter(t,k.hitch(this,function(a){var d=!1;a=a.category;"number"===typeof a&&(d=isNaN(a));return!d}));"sum"!==r&&"average"!==r||l.forEach(t,k.hitch(this,function(a){l.forEach(h,k.hitch(this,function(d,b){if(this._isFloatNumberField(d)){var c=
a.valueFields[b],c=this._getBestValueForFloatNumberField(c,d);a.valueFields[b]=c}}))}));t=this._getDataForMaxLabels(t,m);y&&(t=this._addColorToChartData("category",n,d,t));return t},getCountModeStatisticsInfo:function(b){function a(a){var d=[],b=null,e;for(e in a)b=a[e],this._isNumberField(c)&&"number"===typeof e&&(e=parseFloat(e)),d.push({originValue:b.originValue,fieldValue:e,count:b.count,dataFeatures:b.dataFeatures});return d}var d=b.features,c=b.categoryField,h=b.sortOrder,f=b.maxLabels,g=b.featureLayerForChartSymbologyChart,
k=b.useLayerSymbology,m=[],m=this.getCategoryOrCountHashObj(c,d,b.dateConfig);b=m.nullLabelHashObj;m=a.call(this,m.notNullLabelHashObj);b=a.call(this,b);m=m.concat(b);m=this._sortStatisticsInfo(m,"count",h);m=this._getDataForMaxLabels(m,f);k&&(m=this._addColorToChartData("count",g,d,m));return m},getFieldModeStatisticsInfo:function(b){var a=b.valueFields,d=b.operation,c=b.sortOrder,h=b.maxLabels,f=b.nullValue,g=l.map(b.features,k.hitch(this,function(a){return a.attributes})),m={};l.forEach(a,k.hitch(this,
function(a){m[a]=0;"max"===d?m[a]=-Infinity:"min"===d&&(m[a]=Infinity);var b=g.map(function(d){return d[a]}),c=0,b=f?b.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):b.filter(function(a){return this._isNumber(a)}.bind(this));l.forEach(b,k.hitch(this,function(b){c++;m.hasOwnProperty(a)?"average"===d||"sum"===d?m[a]+=b:"max"===d?m[a]=Math.max(m[a],b):"min"===d&&(m[a]=Math.min(m[a],b)):m[a]=b}));0<c?"average"===d&&(m[a]/=c):m[a]=null}));"sum"!==d&&"average"!==d||l.forEach(a,k.hitch(this,
function(a){m.hasOwnProperty(a)&&this._isFloatNumberField(a)&&(m[a]=this._getBestValueForFloatNumberField(m[a],a))}));b=[];for(var n in m)m.hasOwnProperty(n)&&b.push({label:n,value:m[n]});b=this._sortStatisticsInfo(b,"field",c);return this._getDataForMaxLabels(b,h)},_getDataForMaxLabels:function(b,a){return"number"===typeof a&&0<=a&&a<b.length?b.slice(0,a):b},_sortStatisticsInfo:function(b,a,d,c){function e(a,d,b){var e;"category"===d?b.isLabelAxis?b.isLabelAxis&&(e=a.originValue):b.field||1!==a.fieldsValues.length?
a.fieldsValues.forEach(function(a){b.field===a.field&&(e=a.value)}):e=a.fieldsValues[0].value:"count"===d?(d=a.originValue,e=b.isLabelAxis?d:a.count):"field"===d?e=b.isLabelAxis?a.label:a.value:"feature"===d&&(e=b.isLabelAxis?a.attributes[c]:a.attributes[b.field]);return e}var h=d.isAsc;if(!Array.isArray(b))return b;b.sort(function(b,c){var p=e(b,a,d),f=e(c,a,d);p||"number"===typeof p||(p=Infinity);f||"number"===typeof f||(f=Infinity);var m=0,m=(p>f?h:!h)?1:-1;p===f&&(m=0);return m});return b},_getDateUnit:function(b,
a){var d=a;if("automatic"===a){var e=c(b[0]).local(),h=c(b[1]).local(),e=Math.round(h.diff(e,"minute",!0));0<=e&&1>=e?d="second":1<e&&60>=e?d="minute":60<e&&1440>=e?d="hour":1440<e&&43200>=e?d="day":43200<e&&518400>=e?d="month":518400<e&&(d="year")}return d},_getTimeRange:function(b,a){var d=b.map(k.hitch(this,function(b){return b.attributes[a]})),d=d.filter(function(a){return!!a}),c=Math.min.apply(Math,d),d=Math.max.apply(Math,d);return[c,d]},_getTimeTwixs:function(b,a,d){if(0>"year month day hour minute second automatic".split(" ").indexOf(d))return console.log("Invaild data formatter: "+
d),!1;b=this._getTimeRange(b,a);if(b[0]===b[1])return!1;d=this._getDateUnit(b,d);a=this._getIntegerDateByUnit(b[0],d);a=c(a).local();b=c(b[1]).local();b=a.twix(b).split(1,d);a={startValue:b[b.length-1].end().valueOf(),endValue:Infinity};b.push(a);return{twixs:b,dateUnit:d}},_getIntegerDateByUnit:function(b,a){var d=c(b),e;e=d.year();var f=d.month(),h=d.date(),m=d.hour(),g=d.minute(),d=d.second();switch(a){case "year":e=c({year:e}).valueOf();break;case "month":e=c({year:e,month:f}).valueOf();break;
case "day":e=c({year:e,month:f,day:h}).valueOf();break;case "hour":e=c({year:e,month:f,day:h,hour:m}).valueOf();break;case "minute":e=c({year:e,month:f,day:h,hour:m,minute:g}).valueOf();break;case "second":e=c({year:e,month:f,day:h,hour:m,minute:g,second:d}).valueOf();break;default:e=b}return e},_getDateCategory:function(b,a){return a?this._getFormatteredDate(b,a):b},_getFormatteredDate:function(b,a){var d=this._getDateTemplate(a),e,f;0<=["year","month","day"].indexOf(a)?d=g.localizeDate(new Date(b),
{selector:"date",datePattern:d.date}):(e=g.localizeDate(new Date(b),{selector:"date",datePattern:d.date}),f=c(b).format(d.time),d=e+d.connector+f);return d},_getDateTemplate:function(c){var a=b[n.locale];(a=a||{},a.date)||(a.date={"short":"short"});a&&!a.time&&(a.time={medium:"HH:mm:ss a"});a&&!a.connector&&(a.connector=" ");a&&!a.sNoDay&&(a.sNoDay="MMM, y");var d={};"year"===c?d.date="y":"month"===c?d.date=a.date.sNoDay:"day"===c?d.date=a.date["short"]:"hour"===c?(d.date=a.date["short"],d.time="HH a",
d.connector=a.connector):"minute"===c?(d.date=a.date["short"],d.time="HH:mm a",d.connector=a.connector):"second"===c&&(d.date=a.date["short"],d.time=a.time.medium,d.connector=a.connector);return d},getCategoryOrCountHashObj:function(b,a,d){function c(a,b,d,c){var e=a[0].attributes[b];b="automatic"!==c.minPeriod?this._getDateCategory(e,c.minPeriod):this._getBestDisplayValue(b,e);a={count:1,dataFeatures:a};a.originValue=e;d[b]=a;return d}function f(a,b,d,c){a[b]?(a=a[b],a.count+=c.count,a.dataFeatures=
a.dataFeatures.concat(c.dataFeatures)):(c.originValue=d,a[b]=c)}function h(a,b){var d={};l.forEach(a,k.hitch(this,function(a){var c=a.attributes,e=this._getBestDisplayValue(b,c[b]),f=null;d.hasOwnProperty(e)?(f=d[e],f.dataFeatures.push(a),f.count++):(f={count:1,dataFeatures:[a]},f.originValue=c[b],d[e]=f)}));return d}var m=[],g=a.filter(function(a){var d=a.attributes[b];if(d||"number"===typeof d)return!0;m.push(a)}),n={};a={};if(d)if(1===g.length)n=c.call(this,g,b,n,d);else{if(0!==g.length)if(a=this._getTimeTwixs(g,
b,d.minPeriod)){var q=a.dateUnit;a.twixs.forEach(function(a){var c="undefined"!==typeof a.startValue?a.startValue:a.start().valueOf(),e="undefined"!==typeof a.endValue?a.endValue:a.end().valueOf();a=this._getDateCategory(c,q);var p={count:0,dataFeatures:[]};l.forEach(g,k.hitch(this,function(a){var d=a.attributes[b];d>=c&&d<e&&(p.dataFeatures.push(a),p.count++)}));d.isNeedFilled?f.call(this,n,a,c,p):0<p.count&&f.call(this,n,a,c,p)}.bind(this))}else n=c.call(this,g,b,n,d)}else n=h.call(this,g,b);a=
h.call(this,m,b);return{notNullLabelHashObj:n,nullLabelHashObj:a}}});return{getFeatureModeStatisticsInfo:function(b){return(new m({layerDefinition:b.layerDefinition,popupFieldInfosObj:b.popupFieldInfosObj})).getFeatureModeStatisticsInfo(b)},getCategoryModeStatisticsInfo:function(b){return(new m({layerDefinition:b.layerDefinition,popupFieldInfosObj:b.popupFieldInfosObj})).getCategoryModeStatisticsInfo(b)},getCountModeStatisticsInfo:function(b){return(new m({layerDefinition:b.layerDefinition,popupFieldInfosObj:b.popupFieldInfosObj})).getCountModeStatisticsInfo(b)},
getFieldModeStatisticsInfo:function(b){return(new m({layerDefinition:b.layerDefinition})).getFieldModeStatisticsInfo(b)}}})},"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",onlyDate:"d. M.",
mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",medium:"d MMM y",
onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",
sNoDay:"MM/yy"},connector:" , "},hi:{date:{"short":"d/M/yy",medium:"dd/MM/y","long":"d MMMM y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/yy"},time:{"short":"h:mm a",medium:"h:mm:ss a",sNoDay:""},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},
ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y",
"long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},nl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",
onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",
mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",onlyDate:"d MMM",mNoDay:"MMM, y",sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},
"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge libs/echarts/light libs/echarts/dark".split(" "),function(q,l,k,n,b,c,g,f,m,h){return q([l,c],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",
config:null,validConfig:{type:"column bar line pie radar funnel gauge".split(" "),common:"type title labels legend confine toolbox color theme backgroundColor scale dataZoom events series advanceOption".split(" "),axisChart:["stack","axisPointer","hidexAxis","hideyAxis"],pie:["innerRadius","labelLine"],funnel:["min","max","funnelSort"],gauge:["shape","min","max","gaugeOption"],radar:["radarShape","indicator"]},defaultConfiguration:{series:{pieSeries:[{type:"pie",radius:[0,"70%"],labelLine:{normal:{show:!0,
length:5,length2:5}},data:[]}],funnelSeries:[{type:"funnel",minSize:"0%",maxSize:"100%",sort:"descending",data:[]}]},toolboxs:{dataView:{title:"Data view",readOnly:!1},magicType:{title:{line:"switch to line",bar:"switch to bar",stack:"switch to stack",tiled:"switch to tiled"},type:["line","bar","stack","tiled"]},restore:{title:"restore"},saveAsImage:{title:"save as image"}}},postCreate:function(){this.inherited(arguments);if(this.chartDom){var a=b.getMarginBox(this.chartDom);0===a.w&&(a.w=10);0===
a.h&&(a.h=10);n.set(this.domNode,{width:a.w+"px",height:a.h+"px"})}else console.warn("No valid chart dom!"),n.set(this.domNode,{width:"10px",height:"10px"});this.gauge=new h;this.chart=g.init(this.domNode,this.config.theme||"light");this.gauge.setChart(this.chart);this.setConfig()},updateConfig:function(a){return f.isNotEmptyObject(a)?(k.mixin(this.config,a),a=this._chartFactory(this.config),this.chart.setOption(a),this.config.shape&&"curved"!==this.config.shape&&this.gauge._resetGraphic(this.config),
!0):!1},setConfig:function(a){f.isNotEmptyObject(a)?this.config=a:this.config=this.config||{};if(!this._checkConfig(this.config))return!1;this._customTheme();this.clear();this.chart.setOption(this._chartFactory(this.config));this._resize();return!0},_showInitChart:function(a){var b;b="column"===a.type||"horizontal"===a.shape||"vertical"===a.shape?"bar":a.type;var c={series:[{data:[{name:"0",value:0}]}]};m.isAxisChart(a)&&(c.xAxis={data:["0"]},c.yAxis={});c.series[0].type=b;this.chart.setOption(c,
!1)},_mockChartDataWhenNoData:function(a){a&&Array.isArray(a.labels)&&0===a.labels.length&&(a.labels.push(0),a&&Array.isArray(a.series)&&0<a.series.length&&a.series.forEach(function(a){a&&Array.isArray(a.data)&&0===a.data.length&&a.data.push(0)}));return a},_chartFactory:function(a){a=this._mockChartDataWhenNoData(a);var b=this.chart.getWidth();a=k.clone(a);var c=k.clone(this.defaultConfiguration),f=this.option={},f=this._settingDefaultGrid(f,a),f=this._settingRenderOption(f,a),f=this._settingTitle(f,
a),f=this._settingBackgroundColor(f,a),f=this._settingColor(f,a),f=this._settingToolTip(f,a);m.isAxisChart(a)?(f=this._settingAxisChartAxis(f,a),f=this._settingToolBox(f,a,c),f=this._settingSeries(f,a),f=this._settingStack(f,a),f=this._settingAxisDisplay(f,a)):m.isAxisChart(a)||(f=this._settingToolBox(f,a,c,"magicType"),f=this._settingNoAxisCharts(f,a,c));f=this._settingLegend(f,a);f=this._settingScale(f,a);f=this._handleChartRtl(f,a);f=this._avoidTitleToolBoxOverlap(f,a);f=this._pieChartAvoidLegendLabelOverLap(f,
a);f=this._settingFixedPosition(f,a,b);f=this._settingAdvanceOption(f,a);f=this._avoidAdjoiningColorSameForPie(f,a);this._bindEvents(a);return f},_avoidAdjoiningColorSameForPie:function(a,b){if("pie"!==b.type||!a.color||2>=a.color.length)return a;f.isNotEmptyObject(a.series,!0)&&a.series.forEach(k.hitch(this,function(b){var d=b.data.length;0===(d-1)%a.color.length&&(b=b.data[d-1],b.itemStyle||(b.itemStyle={}),b.itemStyle.normal||(b.itemStyle.normal={}),b.itemStyle.normal.color||(b.itemStyle.normal.color=
a.color[1]))}));return a},_pieChartAvoidLegendLabelOverLap:function(a,b){if("pie"!==b.type)return a;var d=b.labelLine?.75:.85;b.legend&&(d-=.12);a.series[0].radius[1]=100*d+"%";return a},_settingDefaultGrid:function(a,b){m.isAxisChart(b)&&(a.grid={top:20,bottom:10,left:10,right:10,containLabel:!0});return a},_settingRenderOption:function(a,b){if("curved"===b.shape)return a.animationThreshold=99999999,a.hoverLayerThreshold=99999,a.progressiveThreshold=99999,a;a.hoverLayerThreshold=500;a.progressiveThreshold=
500;a.progressive=100;a.animationThreshold=500;return a},clear:function(){this.chart.clear()},resize:function(a,b){n.set(this.domNode,{width:a||"100%",height:b||"100%"});this.chart.resize();this._resize()},_resize:function(){this.config.shape&&"curved"!==this.config.shape&&(this.gauge._resetGrid(this.config),this.gauge._resetGraphic(this.config))},_settingFixedPosition:function(a,b,c){b.shape||this._showInitChart(b);m.isAxisChart(b)&&(a=this._settingDataZoom(a,b,c),a=this._settingGrid(a,b));return a},
destroy:function(){this.chart.clear();f.isNotEmptyObject(this.config.events)&&this.config.events.forEach(k.hitch(this,function(a){this.chart.off(a.name)}));this.inherited(arguments)},_settingAxisDisplay:function(a,b){if(!m.isAxisChart(b))return a;a.xAxis.show=!b.hidexAxis;a.yAxis.show=!b.hideyAxis;a.grid.containLabel=!b.hideyAxis;return a},_handleChartRtl:function(a,b){if(!window.isRTL)return a;if(m.isAxisChart(b)||"vertical"===b.shape||"horizontal"===b.shape)a.xAxis.inverse=!0,a.yAxis.position="right";
return a},_settingTitle:function(a,b){b.title&&(a.title={textStyle:{fontSize:16}},a.title.text=b.title);return a},_settingColor:function(a,b){f.isNotEmptyObject(b.color)&&(a.color=b.color);return a},_settingBackgroundColor:function(a,b){b.backgroundColor&&(a.backgroundColor=b.backgroundColor);return a},_settingToolTip:function(a,b){a.tooltip={};if(b.axisPointer){if(a.tooltip.trigger="axis","column"===b.type||"bar"===b.type)a.tooltip.axisPointer={type:"shadow"}}else a.tooltip.axisPointer={type:""};
return a},_settingAxisChartAxis:function(a,b){a.xAxis={};a.yAxis={};"column"===b.type||"line"===b.type&&b.labels?(a.xAxis.data=b.labels,a.xAxis.type="category"):"bar"===b.type&&b.labels&&(a.yAxis.data=b.labels,a.yAxis.type="category");return a},_settingToolBox:function(a,b,c,h){a.toolbox={};h||(h="");f.isNotEmptyObject(b.toolbox)&&(a.toolbox.feature={},b.toolbox.forEach(function(d){d!==h&&(b.stack&&(c.toolboxs.magicType.type=["line","bar","stack","tiled"]),a.toolbox.feature[d]=c.toolboxs[d])}));return a=
this._handleToolBoxRTL(a,b)},_settingSeries:function(a,b){if(f.isNotEmptyObject(b.series))f.isNotEmptyObject(a.series)||(a.series=b.series);else return console.log("No series!"),a;b.series.forEach(k.hitch(this,function(d,c){var e="",e=d.type?d.type:b.type;d.data=d.data.map(k.hitch(this,function(a,d){this._handleChartBorderWidth(a);if(m.isAxisChart(b))return a;var c={};a||"number"===typeof a?(c.value=a.value?a.value:a,a.itemStyle&&(c.itemStyle=a.itemStyle)):c.value=a;c.name=b.labels[d]||"";return c}));
a.series[c].name=d.name||"";a.series[c].type="column"===e?"bar":e;a.series[c].data=d.data}));return a},_settingNoAxisCharts:function(a,b,c){if("pie"===b.type)a=this._settingPie(a,b,c);else if("funnel"===b.type)a=this._settingFunnel(a,b,c);else if("radar"===b.type)a=this._settingRadar(a,b);else if("gauge"===b.type)return this.gauge._settingGaugeSeries(a,b);return this._settingSeries(a,b)},_settingScale:function(a,b){if(!b.scale)return a;"bar"===b.type?a.xAxis.scale=!0:"line"===b.type||"column"===b.type?
a.yAxis.scale=!0:"radar"===b.type&&(a.radar.scale=!0);return a},_settingAdvanceOption:function(a,b){b.advanceOption&&("object"===typeof b.advanceOption?k.mixin(a,b.advanceOption):"function"===typeof b.advanceOption&&b.advanceOption(a));return a},_bindEvents:function(a){f.isNotEmptyObject(a.events)&&a.events.forEach(k.hitch(this,function(a){this.chart.on(a.name,a.callback)}))},_settingLegend:function(a,b){if(!b.legend)return a;a.legend={type:"scroll",orient:"horizontal",x:"left",pageButtonPosition:"end",
pageTextStyle:{color:"#939393"},bottom:20,y:"bottom",data:[]};m.isAxisChart(b)||"gauge"===b.type?a.series.forEach(function(b){a.legend.data.push(b.name)}):"pie"!==b.type&&"funnel"!==b.type&&"radar"!==b.type||a.series[0].data.forEach(function(b){a.legend.data.push(b.name)});return a=this._handleLegendRTL(a,b)},_handleDataZoomStyle:function(a,b){b.showDataShadow=!1;b.realtime=!1;b.bottom=a.legend?30:"auto";"bar"===a.type&&a.legend&&(b.bottom=50);return b},_showDataZoom:function(a,b,c){c=c||this.chart.getWidth();
var d=b.series[0].data.length*b.series.length,e=m.getAxisZeroPosition.call(this,b);c="bar"!==b.type?window.isRTL?e.left:c-e.left-a.grid.right:e.top;this.showDataZoom=8>c/d;var f=c/(8*d),f=parseFloat(100*f,10).toFixed(3),f=100<f?100:f,f=0===f?.1:f;c=[];var h="bar"===b.type?"xAxis":"yAxis",g="bar"===b.type?"yAxisIndex":"xAxisIndex",l="bar"===b.type?"width":"height";a=this._initAxisOfDataZoom(a,h);c=b.dataZoom.map(k.hitch(this,function(a){a={type:a,start:0,show:this.showDataZoom};a[g]=[0];a[l]=15;a.end=
f;"xAxis"===h&&window.isRTL&&(a.left="10");return a=this._handleDataZoomStyle(b,a)}));a.dataZoom=c;return a},_settingDataZoom:function(a,b,c){if(!f.isNotEmptyObject(b.dataZoom))return{dataZoom:[]};b.dataZoom?a=this._showDataZoom(a,b,c):(this.showDataZoom=!1,a.dataZoom=[]);return a},_avoidTitleToolBoxOverlap:function(a,b){if("gauge"===b.type)return a;var d=10;b.title&&(d+=20);f.isNotEmptyObject(b.toolbox,!0)&&(d+=20);f.isNotEmptyObject(b.toolbox,!0)&&b.title&&(a.toolbox.top=20);m.isAxisChart(b)&&a.grid&&
(a.grid.top=d);return a},_settingGrid:function(a,b){if(!m.isAxisChart(b))return a;var d=10;b.title&&(d+=20);f.isNotEmptyObject(b.toolbox,!0)&&(d+=20);f.isNotEmptyObject(b.toolbox,!0)&&b.title&&(a.toolbox.top=20);a.grid&&(a.grid.top=d);var d=10,c=43;b.hideyAxis&&(d=20,c=63);var h=0,g=10;b.legend&&(h=this.showDataZoom?10:20,g+=20);"line"===b.type&&b.legend&&!this.showDataZoom&&(d+=7);"bar"===b.type?(window.isRTL?a.grid.left=this.showDataZoom?30:10:a.grid.right=this.showDataZoom?30:10,b.hideyAxis&&b.legend&&
(g+=20),a.grid.bottom=g):a.grid.bottom=this.showDataZoom?c+h:d+h;return a},_handleLegendRTL:function(a,b){if(!b.legend)return a;var d={};window.isRTL?(d.x="right",d.pageButtonPosition="start"):(d.x="left",d.pageButtonPosition="end");a.legend=k.mixin(a.legend,d);return a},_handleToolBoxRTL:function(a,b){if(!b.toolbox)return a;var d={top:0};window.isRTL?d.right=0:d.left=0;a.toolbox=k.mixin(a.toolbox,d);return a},_initAxisOfDataZoom:function(a,b){a[b].type="value";a.xAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};
a.yAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};return a},_settingStack:function(a,b){if(!m.isAxisChart(b))return a;a.series=a.series.map(function(a){b.stack&&(a.stack="stack","line"===b.type&&(a.areaStyle={normal:{}},a.smooth=!0));return a});return a},_settingPie:function(a,b,c){if("pie"!==b.type)return a;a.series=c.series.pieSeries;b.innerRadius&&(a.series[0].radius[0]=b.innerRadius);a.series[0].labelLine.normal.show="undefined"===typeof b.labelLine?!0:b.labelLine;return a},_settingFunnel:function(a,
b,c){if("funnel"!==b.type)return a;a.series=c.series.funnelSeries;f.isNotEmptyObject(b.funnel)&&(a.series[0].min=b.min||0,a.series[0].max=b.max||100,a.series[0].sort=b.funnelSort||"descending");return a},_settingRadar:function(a,b){if("radar"!==b.type)return a;a.radar={nameGap:6,radius:"70%"};b.radarShape&&(a.radar.shape=b.radarShape);b.indicator?a.radar.indicator=b.indicator:console.error("No radar indicator");a.series=[{}];a.series[0].label={normal:{show:!0,formatter:function(a){return m.tryLocaleNumber(a.value)}}};
var d=[];b.series[0].data.forEach(function(a,c){d[c]={tooltip:"\x3cspan\x3e"+b.labels[c]+"\x3c/span\x3e"};a.forEach(function(a,e){d[c].tooltip+="\x3cbr/\x3e\x3cspan\x3e"+b.indicator[e].name+"\x3c/span\x3e : \x3cspan\x3e"+a+"\x3c/span\x3e"})});a.tooltip={trigger:"item",formatter:function(a){return'\x3cspan class\x3d"colorEl marginRight5" style\x3d"background-color:'+f.encodeHTML(a.color)+'"\x3e\x3c/span\x3e'+d[a.dataIndex].tooltip}};this.config.confine&&(a.tooltipconfine=!0);return a},_handleChartBorderWidth:function(a){var b=
!1;a&&a.itemStyle&&a.itemStyle.normal&&"undefined"!==typeof a.itemStyle.normal.borderColor&&(b=!0);f.isNotEmptyObject(this.chart._theme)||(this.chart._theme={});a=this.chart._theme;var c=0;b&&(c=.3);a.bar&&a.bar.itemStyle&&(a.bar.itemStyle.normal&&(a.bar.itemStyle.normal.barBorderWidth=c),a.bar.itemStyle.emphasis&&(a.bar.itemStyle.emphasis.barBorderWidth=c));a.pie&&a.pie.itemStyle&&(a.pie.itemStyle.normal&&(a.pie.itemStyle.normal.borderWidth=c),a.pie.itemStyle.emphasis&&(a.pie.itemStyle.emphasis.borderWidth=
c))},_customTheme:function(){f.isNotEmptyObject(this.chart._theme)||(this.chart._theme={});f.isNotEmptyObject(this.config.color)&&(this.chart._theme.color=this.config.color);f.isNotEmptyObject(this.chart._theme.tooltip)||(this.chart._theme.tooltip={});this.config.confine&&(this.chart._theme.tooltip.confine=!0);this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===typeof a.value?(a=parseFloat(a.value).toFixed(2),m.tryLocaleNumber(a)):
a.value}},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}};this.chart._theme.tooltip.formatter=function(a){return m.handleToolTip(a,null,!0)}.bind(this);f.isNotEmptyObject(this.chart._theme.valueAxis)||(this.chart._theme.valueAxis={});f.isNotEmptyObject(this.chart._theme.valueAxis.axisLabel)||(this.chart._theme.valueAxis.axisLabel={});this.chart._theme.valueAxis.axisLabel.formatter=function(a){return f.localizeNumber(a)}},_checkConfig:function(a){var b=
!0;f.isNotEmptyObject(a)||(console.error("Empty config"),b=!1);if(!a.type||0>this.validConfig.type.indexOf(a.type))console.error("Invaild chart type!"),b=!1;var c=k.clone(this.validConfig),h=c.common,g=[],g="column"===a.type||"bar"===a.type||"line"===a.type?h.concat(c.axisChart):h.concat(c[a.type]);Object.keys(a).forEach(function(a){0>g.indexOf(a)&&(b=!1,console.error("Invalid configuration parameter: "+a))});return b}})})},"jimu/dijit/_chartUtils":function(){define(["jimu/utils","esri/lang","dojo/_base/config"],
function(q,l){return{tryLocaleNumber:function(k){var n=k;if(l.isDefined(k)&&isFinite(k))try{var b=q.localizeNumber(k);"string"===typeof b&&(n=b)}catch(c){console.error(c)}return n+""},isAxisChart:function(k){return"column"===k.type||"bar"===k.type||"line"===k.type},getAxisZeroPosition:function(k){if(!this.chart)return!1;var l={},b=0,c=0;if((q.isNotEmptyObject(k.dataZoom,!0)||k.scale)&&k.series&&k.series[0]&&k.series[0].data){var g=k.series[0].data;q.isNotEmptyObject(g,!0)&&("bar"!==k.type?c=q.getMinOfArray(g):
b=q.getMinOfArray(g))}if(k=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[b,c]))b=k[1]-5,l.left=k[0]-5,l.top=b;return q.isNotEmptyObject(l)?l:!1},generateToolTip:function(k,l,b){var c="",c=b?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';b='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+q.encodeHTML(k.color)+'"\x3e\x3c/div\x3e';c+=b;this._isVaildValue(k.seriesName)&&(c+="\x3cdiv\x3e"+k.seriesName+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");
c=this._isNotZeroBoolean(l)?c+("\x3cdiv\x3e"+this.tryLocaleNumber(l)+"\x3c/div\x3e"):this._isVaildValue(k.value)?c+("\x3cdiv\x3e"+this.tryLocaleNumber(k.value)+"\x3c/div\x3e"):c+"\x3cdiv\x3enull\x3c/div\x3e";"pie"===k.seriesType&&(c+="\x3cdiv\x3e("+k.percent+"%)\x3c/div\x3e");return c+"\x3c/div\x3e"},handleToolTip:function(k,l,b){var c='\x3cdiv class\x3d"tooltip-div"\x3e';Array.isArray(k)?(this._isVaildValue(k[0].name)&&(c+='\x3cdiv class\x3d"tr"\x3e'+k[0].name+"\x3c/div\x3e"),k.forEach(function(g){c+=
this.generateToolTip(g,l,b)}.bind(this))):(this._isVaildValue(k.name)&&(c+='\x3cdiv class\x3d"tr"\x3e'+k.name+"\x3c/div\x3e"),c+=this.generateToolTip(k,l,b));return c+="\x3c/div\x3e"},_isVaildValue:function(k){var l=!0;"%00-"===encodeURI(k)?l=!1:k||"number"===typeof k||(l=!1);return l},_isNotZeroBoolean:function(k){return 0===k?!0:!!k}}})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare","dojo/_base/lang","jimu/utils","./_chartUtils"],function(q,l,k,n){return q([],{curvedGaugeSeries:[{type:"gauge",
center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{normal:{}},detail:{show:!0,offsetCenter:[0,"60%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500}],horizontalGauge:{grid:{top:"middle",height:90},xAxis:{show:!0,offset:-27,type:"value",
scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",barWidth:30,label:{normal:{show:!0,position:"top",offset:[20,0],textStyle:{}}},data:[{value:40,
label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},z:10}]},verticalGauge:{grid:{left:"middle",width:60},yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",
data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",barWidth:30,label:{normal:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},z:10}]},setChart:function(b){this.chart=b},_settingValueStyle:function(b,
c){if(c.gaugeOption&&k.isNotEmptyObject(c.gaugeOption.valueStyle)){var g=c.gaugeOption.valueStyle,f=g.textStyle,g=g.formatter;"horizontal"===c.shape||"vertical"===c.shape?(l.mixin(b.series[1].data[0].label.normal.textStyle,f),g&&(b.series[1].data[0].label.normal.formatter=g)):"curved"===c.shape&&(l.mixin(b.series[0].detail.textStyle,f),g&&(b.series[0].detail.formatter=g))}return b},_settingLabelColor:function(b,c){var g="#000";c.gaugeOption&&c.gaugeOption.labelColor&&(g=c.gaugeOption.labelColor);
"curved"===c.shape?b.series[0].axisLabel.textStyle.color=g:"horizontal"===c.shape?b.xAxis.axisLabel.textStyle.color=g:"vertical"===c.shape&&(b.yAxis.axisLabel.textStyle.color=g);return b},_settingHorizontalGauge:function(b,c){l.mixin(b,l.clone(this.horizontalGauge));b.grid={top:"middle",height:90,left:"10%",right:"10%"};c.min="undefined"!==typeof c.min&&c.min?c.min:0;c.max="undefined"!==typeof c.max&&c.max?c.max:100;b.xAxis.max=c.max;b.xAxis.min=c.min;b.xAxis.scale=!0;b.series[0].data[0]=c.max;b=
this._handleValue(b,c);c.labels&&c.labels[0]&&(b.series[1].data[0].name=c.labels[0]);b.series[1].name=c.series[0].name;b=this._settingNoCurvedGaugeColor(b,c);return b=this._handleHorizontalGaugeValueRTL(b,c)},_handleHorizontalGaugeValueRTL:function(b,c){if(!window.isRTL||"horizontal"!==c.shape)return b;b.series[1].label.normal.offset=[-20,0];return b},_settingVerticalGauge:function(b,c){l.mixin(b,l.clone(this.verticalGauge));b.grid={left:"middle",width:60,top:"10%",bottom:"10%"};b.grid.left=this._getGridLeftOfVerticalGauge();
c.min="undefined"!==typeof c.min&&c.min?c.min:0;c.max="undefined"!==typeof c.max&&c.max?c.max:100;b.yAxis.max=c.max;b.yAxis.min=c.min;b.series[0].data[0]=c.max;b=this._handleValue(b,c);c.labels&&c.labels[0]&&(b.series[1].data[0].name=c.labels[0]);b.series[1].name=c.series[0].name;b=this._settingNoCurvedGaugeColor(b,c);return b=this._handleVerticalGaugeValueRTL(b,c)},_handleVerticalGaugeValueRTL:function(b,c){if(!window.isRTL||"vertical"!==c.shape)return b;var g=(c.series[0].data[0]+"").length-1;c.gaugeOption&&
c.gaugeOption.valueStyle&&"undefined"!==typeof c.gaugeOption.valueStyle.decimalPlaces&&(g+=c.gaugeOption.valueStyle.decimalPlaces);b.series[1].label.normal.offset=[-17-9*g,-15];return b},_handleValue:function(b,c){var g;g=c.series[0].data[0]<=c.max?c.series[0].data[0]:c.max;b.tooltip.formatter=function(b){return n.handleToolTip(b,c.series[0].data[0],!1)};b.series[1].data[0].value=g;return b},_settingCurvedGauge:function(b,c){b.series=l.clone(this.curvedGaugeSeries);c.min="undefined"!==typeof c.min&&
c.min?c.min:0;c.max="undefined"!==typeof c.max&&c.max?c.max:100;b.series[0].min=c.min;b.series[0].max=c.max;b.tooltip.formatter=function(b){return n.handleToolTip(b,null,!1)};b.series[0].axisLine.lineStyle.color[0][0]=parseFloat(c.series[0].data[0]/c.max).toFixed(2);b.series[0].data[0].value=c.series[0].data[0];c.labels&&c.labels[0]&&(b.series[0].data[0].name=c.labels[0]);c.series[0].name&&(b.series[0].name=c.series[0].name);b.series[0].axisLine.lineStyle.width=30;return b=this._settingCurvedGaugeColor(b,
c)},_settingGaugeSeries:function(b,c){if("gauge"!==c.type)return b;"horizontal"===c.shape?b=this._settingHorizontalGauge(b,c):"vertical"===c.shape?b=this._settingVerticalGauge(b,c):"curved"===c.shape&&(b=this._settingCurvedGauge(b,c));b=this._settingGaugeLabel(b,c);b=this._settingLabelColor(b,c);return b=this._settingValueStyle(b,c)},_resetGraphic:function(b){b=this._settingGraphic(b);this._clearGraphic();this.chart.setOption({graphic:b});this.cacheGraphic=null;this.cacheGraphic=b},_clearGraphic:function(){this.cacheGraphic&&
(this.cacheGraphic.forEach(function(b){b.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},_resetGrid:function(b){b=this._settingGridLeftOfVerticalGauge(b);k.isNotEmptyObject(b)&&this.chart.setOption({grid:b})},_settingGridLeftOfVerticalGauge:function(b){return"gauge"!==b.type||"vertical"!==b.shape?{}:{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_settingCurvedGaugeColor:function(b,c){c.gaugeOption&&(c.gaugeOption.bgColor&&(b.series[0].axisLine.lineStyle.color[1][1]=
c.gaugeOption.bgColor),c.gaugeOption.columnColor&&(b.series[0].axisLine.lineStyle.color[0][1]=c.gaugeOption.columnColor));return b},_settingNoCurvedGaugeColor:function(b,c){c.gaugeOption&&(c.gaugeOption.bgColor&&(b.series[0].itemStyle.normal.color=c.gaugeOption.bgColor),c.gaugeOption.columnColor&&(b.series[1].data[0].itemStyle.normal.color=c.gaugeOption.columnColor));return b},_settingGraphic:function(b){var c=[];"gauge"===b.type&&b.gaugeOption&&("horizontal"===b.shape?c=this._settingHorizontalGraphic(b):
"vertical"===b.shape&&(c=this._settingVerticalGraphic(b)));return c},_settingHorizontalGraphic:function(b){var c="#000";b.gaugeOption&&b.gaugeOption.labelColor&&(c=b.gaugeOption.labelColor);var g=[],f=this.chart.convertToPixel({yAxisIndex:0},0),f=parseInt(f,10),f=Number(f)+16;this.cacheCriticalValues=l.clone(this.criticalValues);this.cacheCriticalValues.forEach(l.hitch(this,function(m){var h,a;"object"===typeof m?m.type&&(h=m.type,a=m.value):a=m;m=b.min||0;if(!(a>(b.max||100)||a<m)){m=this._getxAxisValueLeft(a);
var d=6*(a.toString().length-2),e=m;0<d&&(e=m-d);h||g.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+k.getRandomString(),left:m,style:{image:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d",
width:10,height:10},silent:!0,top:f});g.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+k.getRandomString(),left:e,style:{text:a,fill:c,font:"normal 11px sans-serif"},silent:!0,top:f+11})}}));return g},_settingVerticalGraphic:function(b){var c="#000";b.gaugeOption&&b.gaugeOption.labelColor&&(c=b.gaugeOption.labelColor);var g=[],f=this.chart.convertToPixel({xAxisIndex:0},0),f=parseFloat(f,10).toFixed(2),f=Number(f),m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
window.isRTL&&(f+=40,m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+");
var h=f-26;this.cacheCriticalValues=l.clone(this.criticalValues);this.cacheCriticalValues.forEach(l.hitch(this,function(a){var d,f;"object"===typeof a?a.type&&(d=a.type,f=a.value):f=a;a=h;a=window.isRTL?h+11:h-11-6*(f.toString().length-1);var p=b.min||0;f>(b.max||100)||f<p||(p=this._getyAxisValueTop(f),p-=2,d||g.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+k.getRandomString(),left:h,style:{image:m,width:10,height:10},silent:!0,top:p}),g.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+
k.getRandomString(),left:a,style:{text:f,fill:c,font:"normal 11px sans-serif"},silent:!0,top:p-2}))}));return g},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(b){b=this.chart.convertToPixel({xAxisIndex:0},b);return parseFloat(b,10)-4},_getyAxisValueTop:function(b){b=this.chart.convertToPixel({yAxisIndex:0},b);return parseFloat(b,10)},_showSpecialLabel:function(b,c,g){var f=((c.max||100)-(c.min||0))/1E3;g.sort(function(b,a){return b-a});var m=
function(b){var a;g.forEach(function(d){"undefined"===typeof a&&d>=b&&d<b+f&&(a=d)});return a};"curved"===c.shape?b.series[0].axisLabel.formatter=m:"horizontal"===c.shape?b.xAxis.axisLabel.formatter=m:"vertical"===c.shape&&(b.yAxis.axisLabel.formatter=m);return b},_settingGaugeLabel:function(b,c){var g=c.min||0,f=c.max||100,m=[];c.gaugeOption&&c.gaugeOption.showTargetValueLabel&&("curved"===c.shape&&(b.series[0].splitNumber=1E3,b.series[0].axisTick.splitNumber=1,b.series[0].axisTick.show=!1),c.gaugeOption.targetValue&&
c.gaugeOption.targetValue.forEach(function(b){m.push(b)}));this.criticalValues=l.clone(m);c.gaugeOption&&c.gaugeOption.showDataRangeLabel&&(0>m.indexOf(g)&&(m.push(g),this.criticalValues.push({type:"min",value:g})),0>m.indexOf(f)&&(m.push(f),this.criticalValues.push({type:"max",value:f})));return"curved"===c.shape?this._showSpecialLabel(b,c,m):b}})})},"libs/echarts/light":function(){(function(q,l){"function"===typeof define&&define.amd?define(["exports","./echarts"],l):"object"===typeof exports&&
"string"!==typeof exports.nodeName?l(exports,require("./echarts")):l({},q.echarts)})(this,function(q,l){l?l.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:"1"}},symbolSize:"10",symbol:"circle",smooth:!1},
radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderColor:"#ccc"},emphasis:{barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},
emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,
lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",handleSize:"100%",
borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(q,l){"function"===typeof define&&define.amd?define(["exports","./echarts"],l):"object"===typeof exports&&"string"!==typeof exports.nodeName?l(exports,require("./echarts")):l({},q.echarts)})(this,function(q,l){l?l.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),
textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{borderWidth:"1"}},lineStyle:{normal:{width:"1"}},symbolSize:"10",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:"1"}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderColor:"#ccc"},emphasis:{barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,
borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},
valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",
width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"jimu/dijit/_StatisticsChartSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_StatisticsChartSettings.html dijit/ColorPalette jimu/utils".split(" "),
function(q,l,k,n,b,c,g,f,m,h,a,d,e,p){return q([m,h,a,f],{baseClass:"jimu-dijit-statistics-chart-settings",templateString:d,colors:{c1:"#5d9cd3 #eb7b3a #a5a5a5 #febf29 #4673c2 #72ad4c".split(" "),c2:"#5d9cd3 #a5a5a5 #4673c2 #285f8f #636363 #274577".split(" "),c3:"#eb7b3a #febf29 #72ad4c #9c4618 #987214 44682e".split(" "),c4:"#72ad4c #4673c2 #febf29 #44682e #274577 #987214".split(" "),g1:["#43729b","#c4d5ea"],g2:["#ac5928","#f5ccbf"],g3:["#787878","#d8d8d8"],g4:["#bb8b1b","#fee1be"],g5:["#30538d",
"#c0c9e3"],g6:["#517e36","#c9dbc2"],g7:["#c4d5ea","#43729b"],g8:["#f5ccbf","#ac5928"],g9:["#d8d8d8","#787878"],g10:["#fee1be","#bb8b1b"],g11:["#c0c9e3","#30538d"],g12:["#c9dbc2","#517e36"]},palette:null,defaultSingleColor:"#5d9cd3",multiColorValue:"c1",imagesUrl:window.require.toUrl("jimu/css/images/chart/"),isInWidget:!1,type:"",singleColor:!1,config:null,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},postCreate:function(){this.inherited(arguments);this._initSelf();this.isInWidget&&
this._bindEvents();this.own(g(this.multiColorSection,"click",l.hitch(this,function(a){a=a.target||a.srcElement;if(n.hasClass(a,"multi-color")&&!n.hasClass(a,"selected")){var b=this.multiColorValue;this._selectMultiColorDiv(a);b!==a.colorValue&&this.isInWidget&&this._configChange()}})))},_initSelf:function(){this.config=l.clone(this.config);p.combineRadioCheckBoxWithLabel(this.cbxAxisX,this.labelAxisX);p.combineRadioCheckBoxWithLabel(this.cbxAxisY,this.labelAxisY);p.combineRadioCheckBoxWithLabel(this.cbxPieLabel,
this.labelPie);this._setSingleColorForColorDiv(this.defaultSingleColor);this.palette=new e({palette:"7x10",cellClass:"cursor:pointer",style:{width:"220px"},onChange:l.hitch(this,function(a){var b=this._getSingleColorFromColorDiv();this._setSingleColorForColorDiv(a);this.isInWidget&&b!==a&&this._configChange()})});this.palette.placeAt(this.paletteContainer);this.palette.startup();k.forEach(["c1","c2","c3","c4"],l.hitch(this,function(a){n.create("div",{"class":"multi-color colorful "+a},this.colorfulContainer).colorValue=
a}));k.forEach("g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 g11 g12".split(" "),l.hitch(this,function(a){n.create("div",{"class":"multi-color monochromatic "+a},this.monochromaticContainer).colorValue=a}));this._setMultiColorValue("c1");"pie"===this.type?(this.singleColor=!1,n.setStyle(this.divAxisX,"display","none"),n.setStyle(this.divAxisY,"display","none")):n.setStyle(this.divPieLabel,"display","none");this.reset();this.config&&this.setConfig(this.config)},_bindEvents:function(){"pie"===this.type?this.own(g(this.cbxPieLabel,
"change",l.hitch(this,this._configChange))):(this.own(g(this.cbxAxisX,"change",l.hitch(this,this._configChange))),this.own(g(this.cbxAxisY,"change",l.hitch(this,this._configChange))))},setConfig:function(a){this.reset();this.cbxAxisX.checked=!1===a.showHorizontalAxis?!1:!0;this.cbxAxisY.checked=!1===a.showVerticalAxis?!1:!0;this.cbxPieLabel.checked=!1===a.showDataLabel?!1:!0;a=l.clone(a.colors||[]);(this.singleColor=1===a.length&&"pie"!==this.type)?this.showSingleColor(a[0]):this.showMultiColor(a)},
getConfig:function(){var a={colors:[]};"pie"===this.type?(a.colors=this.colors[this._getMultiColorValue()],2===a.colors.length&&(a.colors=this._createHexColors(a.colors[0],a.colors[1],6)),a.showDataLabel=this.cbxPieLabel.checked):(a.showHorizontalAxis=this.cbxAxisX.checked,a.showVerticalAxis=this.cbxAxisY.checked,a.colors=this.singleColor?[this._getSingleColorFromColorDiv()]:this.colors[this._getMultiColorValue()]);return a},_setSingleColorForColorDiv:function(a){n.setStyle(this.colorDiv,"backgroundColor",
a);this.colorDiv.bgHex=a},_getSingleColorFromColorDiv:function(){return this.colorDiv.bgHex},_setMultiColorValue:function(a){(a=b("."+a,this.multiColorSection))&&0<a.length&&this._selectMultiColorDiv(a[0])},_selectMultiColorDiv:function(a){b(".multi-color",this.multiColorSection).removeClass("selected");n.addClass(a,"selected");this.multiColorValue=a.colorValue},_getMultiColorValue:function(){return this.multiColorValue},reset:function(){"pie"===this.type?this.cbxPieLabel.checked=!0:(this.cbxAxisX.checked=
!0,this.cbxAxisY.checked=!0);this.singleColor?this.showSingleColor():this.showMultiColor()},showSingleColor:function(a){"pie"===this.type?this.singleColor=!1:(this.singleColor=!0,n.setStyle(this.singleColorSection,"display","block"),n.setStyle(this.multiColorSection,"display","none"),a&&this._setSingleColorForColorDiv(a))},showMultiColor:function(a){this.singleColor=!1;n.setStyle(this.singleColorSection,"display","none");n.setStyle(this.multiColorSection,"display","block");if(a&&0<a.length){var b=
null,d=!1,f;for(f in this.colors)if(b=this.colors[f],d=!1,b.length===a.length&&(d=k.every(b,l.hitch(this,function(b,d){var f=new c(b),e=new c(a[d]);return f.toHex().toLowerCase()===e.toHex().toLowerCase()})))){this._setMultiColorValue(f);break}}},showShelter:function(){n.setStyle(this.shelter,"display","block")},hideShelter:function(){n.setStyle(this.shelter,"display","none")},_configChange:function(){var a=this.getConfig();this.emit("change",a)},_createHexColors:function(a,b,d){var f=[];a=c.fromHex(a);
var e=c.fromHex(b);b=(e.r-a.r)/(d-1);for(var h=(e.g-a.g)/(d-1),e=(e.b-a.b)/(d-1),g=null,m=0;m<d;m++)g=new c,g.r=Math.floor(a.r+b*m),g.g=Math.floor(a.g+h*m),g.b=Math.floor(a.b+e*m),f.push(g.toHex());return f}})})},"widgets/Infographic/dijits/GaugeDijit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html ./BaseDijit jimu/utils jimu/dijit/Chart ./utils".split(" "),function(q,l,k,n,b,c,g){return q([n],{templateString:'\x3cdiv style\x3d"height:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"gauge"\x3e\x3c/div\x3e\x3c/div\x3e',
type:"gauge",config:null,postCreate:function(){this.inherited(arguments);this.features=[];this.DEFAULT_GAUGE_CONFIG={type:"gauge",confine:!0,shape:"curved",min:0,max:100,series:[{data:[0]}]};this.config&&(this.DEFAULT_GAUGE_CONFIG.shape=this.config.shape);this.isDarkTheme()?this.DEFAULT_GAUGE_CONFIG.theme="dark":this.DEFAULT_GAUGE_CONFIG.theme="light";this._initChart();this.setConfig(this.config)},onDataSourceDataUpdate:function(b){this.features=b.features;this._updateStatisticsValue()},resize:function(b,
c){this.chart&&(b&&c?this.chart.resize(b,c):this.chart.resize())},_updateStatisticsValue:function(){if(this.config.statistic&&this.dataSource){var b=g.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features),b=this._getVaildValue(b);"number"===typeof b&&(this.value=b,this._setValue(this.config))}},setConfig:function(b){b&&(this.config=b,this.config.display&&this.config.display.backgroundColor&&k.setStyle(this.domNode,"backgroundColor",this.config.display.backgroundColor),this._updateStatisticsValue())},
_setValue:function(c){var f={};f.series=[{data:[this.value]}];var h=!1;"undefined"!==typeof c.max&&"undefined"!==typeof c.min&&(f.max=c.max,f.min=c.min);var a={},d=this._getIndicatorInfo(c);if(b.isNotEmptyObject(c.display)){var e=c.display;e.backgroundColor&&k.setStyle(this.domNode,"backgroundColor",e.backgroundColor);e.gaugeColor&&(a.columnColor=e.gaugeColor);e.bgColor&&(a.bgColor=e.bgColor);if(b.isNotEmptyObject(e.dataLabels)&&e.dataLabels.state){var g=e.dataLabels;a.showDataRangeLabel=!!g.dataRange;
a.showTargetValueLabel=!!g.targetValue;h=a.showTargetValueLabel;a.labelColor=g.textColor||""}g={state:!0,isRatio:!1,font:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},textColor:"#59bad8"},dataFormat:{unit:"none",decimalPlaces:"",prefix:"",suffix:""}};g=e.currentValue.state?e.currentValue:g;if(b.isNotEmptyObject(g)){var e={},n=g.dataFormat;n&&""!==n.decimalPlaces&&"undefined"!==typeof n.decimalPlaces&&(e.decimalPlaces=Number(n.decimalPlaces));n=l.hitch(this,function(a,b){var d,f,e="";a.isRatio?
(d=b/c.max,d*=100,e="%"):d=b;if(a.dataFormat){var h=a.dataFormat;a.isRatio||("percentage"===h.unit?(d*=100,e="%"):"thousand"===h.unit?(e=this.nls.thousandAbbreviation,d/=1E3):"million"===h.unit?(e=this.nls.millionAbbreviation,d/=1E6):"billion"===h.unit&&(e=this.nls.billionAbbreviation,d/=1E9));""!==h.decimalPlaces&&"undefined"!==typeof h.decimalPlaces&&(d=d.toFixed(Number(h.decimalPlaces)));f=d+e;h.prefix&&(f=h.prefix+" "+f);h.suffix&&(f+=" "+h.suffix)}return f},g,this.value);e.formatter=n;g.font&&
(n={},"undefined"!==typeof g.font.fontSize&&(n.fontSize=Number(g.font.fontSize)),g.font.textColor&&(n.color=g.font.textColor),d.valueColor&&(n.color=d.valueColor),g.font&&g.font.font&&(g=g.font.font,n.fontWeight=g.bold?"bold":"normal",g.fontFamily&&(n.fontFamily=g.fontFamily),n.fontStyle=g.italic?"italic":"normal"),e.textStyle=n);a.valueStyle=e}}d.targetValue&&(a.targetValue=h?d.targetValue:[]);d.columnColor&&(a.columnColor=d.columnColor);f.gaugeOption=a;this.chart.updateConfig(f)},_getIndicatorInfo:function(c){var f=
!1,h=!1,a=!1,d=this._getIndicatorValues(c);b.isNotEmptyObject(d,!0)&&(f=d);if(d=c.indicators)(c=g.getVaildIndicator(this.value,d,c.max))&&c.gaugeColor&&(h=c.gaugeColor),c&&c.valueColor&&(a=c.valueColor);return{targetValue:f,columnColor:h,valueColor:a}},_initChart:function(){this.chart=new c({chartDom:this.domNode,config:this.DEFAULT_GAUGE_CONFIG});this.chart.placeAt(this.domNode);setTimeout(l.hitch(this,function(){this.chart.resize()}),300)},_getVaildValue:function(b){if("undefined"!==typeof b)return Number(b)},
_getIndicatorValues:function(c){var f=[];c.indicators&&(c.indicators.forEach(function(b){b.value&&b.value.forEach(l.hitch(this,function(a){f.push(b.isRatio?a/100*c.max:a)}))}),f.sort(function(b,a){return b-a}),f=b.uniqueArray(f));return f}})})},"widgets/Infographic/dijits/utils":function(){define("dojo/on dojo/_base/lang dojo/_base/array esri/geometry/geometryEngine jimu/utils jimu/DataSourceManager jimu/statisticsUtils".split(" "),function(q,l,k,n,b,c,g){return{getClientFeaturesFromMap:function(c,
g,h,a){var d=[],e=!1;h?0<g.getSelectedFeatures().length?(d=g.getSelectedFeatures(),e=!0):d=g.graphics:d=g.graphics;a&&(d=this._filterFeaturesByExtent(c.extent,d));if(0<d.length){var f=b.getObjectIdField(g);f&&(c=d[0])&&c.attributes&&c.attributes.hasOwnProperty(f)&&d.sort(function(a,b){a.attributes||(a.attributes={});b.attributes||(b.attributes={});var d=a.attributes[f],c=b.attributes[f];return d<c?-1:d>c?1:0})}d.isSelectedFeatures=e;return d},listenClientFeaturesFromMap:function(b,c,h,a,d){var e=
[];h&&(e.push(q(c,"selection-complete",l.hitch(this,function(){d(this.getClientFeaturesFromMap(b,c,h,a))}))),e.push(q(c,"selection-clear",l.hitch(this,function(){d(this.getClientFeaturesFromMap(b,c,h,a))}))));a&&e.push(q(b,"extent-change",l.hitch(this,function(){0<c.graphics.length&&d(this.getClientFeaturesFromMap(b,c,h,a))})));e.push(q(c,"update-end",l.hitch(this,function(){d(this.getClientFeaturesFromMap(b,c,h,a))})));d(this.getClientFeaturesFromMap(b,c,h,a));return{remove:function(){e&&k.forEach(e,
l.hitch(this,function(a){a.remove()}));e=null}}},getVaildIndicator:function(b,c,h){var a=[];c.map(l.hitch(this,function(d){(d=this._handleOperator(d,b,h))&&a.push(d)}));if(0<a.length)return a[a.length-1]},getSingleValueFromFeatures:function(b,g,h){var a=c.getInstance(),d=0;if("Features"===b.type){if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===g.dataSourceType||"Features"===a.getDataSourceConfig(g.frameWorkDsId).type)return h.length;d=0;k.forEach(h,function(a){d+=a.attributes.count});return d}if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===
g.dataSourceType||"Features"===a.getDataSourceConfig(g.frameWorkDsId).type)return this._getStatsFromFeatures(h,b.fieldName,b.statisticsType);var e=0,f=0,d=0;k.forEach(h,function(a){var c=a.attributes[b.fieldName+"_"+b.statisticsType];switch(b.statisticsType){case "sum":e+=c;break;case "min":e=Math.min(e,c);break;case "max":e=Math.max(e,c);break;case "avg":f+=a.attributes[b.fieldName+"_sum"],d+=a.attributes.count}});"avg"===b.statisticsType&&(e=0===d?0:f/d);return e},filterFeaturesByDataSourceSetting:function(b,
c,g){if(0===b.length)return[];if(c.useSelection){var a=b[0].getLayer();if(a){var d=a.getSelectedFeatures();0<d.length&&(b=k.filter(b,function(a){return-1<d.indexOf(a)}))}}c.filterByExtent&&(b=this._filterFeaturesByExtent(g.extent,b));return b},_getStatsFromFeatures:function(b,c,h){return g.getStatisticsResultFromClientSync({featureSet:{features:b},fieldName:c,statisticTypes:[h]})[h+"Field"]},_filterFeaturesByExtent:function(b,c){var f=b.normalize();return c=k.filter(c,l.hitch(this,function(a){try{if(a.geometry){var b=
"point"===a.geometry.type||"multipoint"===a.geometry;return k.some(f,l.hitch(this,function(c){return b?c.contains(a.geometry):n.intersects(c,a.geometry)}))}}catch(e){console.error(e)}return!1}))},_handleOperator:function(b,c,g){function a(a){d={};a.valueColor&&(d.valueColor=a.valueColor);a.gaugeColor&&(d.gaugeColor=a.gaugeColor);a.iconInfo&&(d.iconInfo=a.iconInfo)}var d,e=b.value.map(l.hitch(this,function(a){return b.isRatio?a/100*g:a}));"greater"===b.operator&&c>e[0]?a(b):"smaller"===b.operator&&
c<e[0]?a(b):"between"===b.operator&&c>e[0]&&c<e[1]?a(b):"equal"===b.operator&&c===e[0]?a(b):"notEqual"===b.operator&&c!==e[0]&&a(b);return d},isInteger:function(b){return"number"===typeof b&&0===b%1}}})},"widgets/Infographic/dijits/NumberDijit":function(){define("dojo/_base/declare dojo/_base/lang esri/lang ./BaseDijit dojo/dom-style dojo/_base/html jimu/utils ./utils ./styleUtils jimu/LayerInfos/LayerInfos jimu/DataSourceManager".split(" "),function(q,l,k,n,b,c,g,f,m,h,a){return q([n],{templateString:'\x3cdiv style\x3d"height:100%;width:100%;"\x3e\x3ca data-dojo-attach-point\x3d"numberContent" class\x3d"number-content no-trim" target\x3d"_blank"\x3e\x3cdiv data-dojo-attach-point\x3d"leftIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"number" class\x3d"number"\x3e\x3cdiv data-dojo-attach-point\x3d"prefix" class\x3d"prefix"\x3e\x3c/div\x3e\x3cdiv class\x3d"value-content" data-dojo-attach-point\x3d"valueContent"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"suffix" class\x3d"suffix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"rightIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e',
baseClass:"infographic-number-dijit",type:"number",config:null,postCreate:function(){this.inherited(arguments);this.value=this.features=null;this.setConfig(this.config)},onDataSourceDataUpdate:function(a){this.features=a.features;this._updateStatisticsValue()},setDataSource:function(b){this.dataSource=b;if(b.layerId){var c=h.getInstanceSync().getLayerInfoById(b.layerId);c&&c.getLayerObject().then(l.hitch(this,function(a){this.features=f.getClientFeaturesFromMap(this.map,a,b.useSelection,b.filterByExtent);
this._updateStatisticsValue()}))}else b.frameWorkDsId&&(c=a.getInstance().getData(b.frameWorkDsId))&&(this.features=c.features,this._updateStatisticsValue())},_updateStatisticsValue:function(){this.value=this.features&&this.config.statistic&&this.dataSource?f.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features):null;this._updateUI(this.config,this.value)},setConfig:function(a){a&&a.background&&a.background.backgroundColor?c.setStyle(this.domNode,"backgroundColor",a.background.backgroundColor):
c.setStyle(this.domNode,"backgroundColor","#FFFFFF");this.config=a;this._updateStatisticsValue()},_updateUI:function(a,b){this._cleanUI();this.config=a;this.valueContent.innerHTML=null===b?this.nls.noData:this._tryLocaleNumber(b);g.isNotEmptyObject(this.config)&&this._setValueDisplay(this.config)},_setValueDisplay:function(a){a&&(this._setBackground(a),this._setFont(a),"undefined"!==typeof this.value&&(this._setDataFormat(a),a=this._getIndicatorColor(),a.color&&this._setValueColor(a.color),a.icon&&
this._setIndicatorIcon(a.icon)))},_setIndicatorIcon:function(a){a&&("left"===a.placement||"right"===a.placement?this._setLeftRightIcon(a):"replace"===a.placement&&this._setReplaceIcon(a))},_setReplaceIcon:function(a){var d=c.create("div",{"class":"indicator-icon "+a.icon});c.empty(this.valueContent);c.place(d,this.valueContent);b.set(d,"color",a.color);b.set(d,"display","inline-flex")},_setLeftRightIcon:function(a){var d;"left"===a.placement?d=this.leftIcon:"right"===a.placement&&(d=this.rightIcon);
c.addClass(d,"indicator-icon "+a.icon);b.set(d,"color",a.color)},_getIndicatorColor:function(){var a=!1,b=!1,c=this.config.indicators;c&&((c=f.getVaildIndicator(this.value,c))&&c.valueColor&&(a=c.valueColor),c&&g.isNotEmptyObject(c.iconInfo)&&(b=c.iconInfo));return{color:a,icon:b}},_setFont:function(a){if(a&&a.font){var b={};m.font.setStyle(a.font,b);c.setStyle(this.number,b)}},_setDataFormat:function(a){if(this.value&&a&&a.dataFormat){var b=this.value,c="";a=a.dataFormat;"percentage"===a.unit?(b*=
100,c="%"):"thousand"===a.unit?(c=this.nls.thousandAbbreviation,b/=1E3):"million"===a.unit?(c=this.nls.millionAbbreviation,b/=1E6):"billion"===a.unit&&(c=this.nls.billionAbbreviation,b/=1E9);""!==a.decimalPlaces&&"undefined"!==typeof a.decimalPlaces&&(b=b.toFixed(Number(a.decimalPlaces)));b=this._tryLocaleNumber(b)+c;this.valueContent.innerHTML=b;a.prefix&&(this.prefix.innerHTML=a.prefix);a.suffix&&(this.suffix.innerHTML=a.suffix)}},_cleanUI:function(){c.removeClass(this.leftIcon);c.addClass(this.leftIcon,
["icon"]);c.removeClass(this.rightIcon);c.addClass(this.rightIcon,["icon"]);this.replaceIcon&&(c.destroy(this.replaceIcon),this.replaceIcon=null);c.empty(this.valueContent);c.empty(this.prefix);c.empty(this.suffix);this._setValueColor("")},_getVaildValue:function(a){if("undefined"!==typeof a)return Number(a)},_setBackground:function(a){if(a&&a.background){a=a.background;a.backgroundColor&&c.setStyle(this.domNode,"backgroundColor",a.backgroundColor);if(a.alignment){var b=a.alignment;c.removeClass(this.domNode);
c.addClass(this.domNode,"infographic-number-dijit");b.horizontal&&c.addClass(this.domNode,"horizontal-"+b.horizontal);b.vertical&&c.addClass(this.domNode,"vertical-"+b.vertical)}a.link?c.setAttr(this.numberContent,"href",a.link):c.removeAttr(this.numberContent,"href")}},_setValueColor:function(a){b.set(this.number,"color",a)},_tryLocaleNumber:function(a){var b=a;if(k.isDefined(a)&&isFinite(a))try{var c=g.localizeNumber(a);"string"===typeof c&&(b=c)}catch(r){console.error(r)}return b+""}})})},"widgets/Infographic/_ChartSetting":function(){define(["dojo/_base/declare",
"dojo/_base/html","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./_ChartSetting.html"],function(q,l,k,n,b){return q([k,n],{templateString:b,baseClass:"ig-chart-setting-dlg",postCreate:function(){var b=this.chartJson.config.type;"pie"===b?(l.setStyle(this.verticalAxisSection,"display","none"),l.setStyle(this.horizontalAxisSection,"display","none")):l.setStyle(this.dataLabelsSection,"display","none");this.chartJson.config.dateConfig||l.setStyle(this.withoutRecordsSection,"display","none");
this.chartJson.config.useLayerSymbology&&"pie"!==b&&l.setStyle(this.legendSection,"display","none");this.chartJson.config.showLegend&&this._toggle(this.legendToggle);this.chartJson.config.showDataLabel&&this._toggle(this.dataLabelsToggle);this.chartJson.config.showHorizontalAxis&&this._toggle(this.horizontalAxisToggle);this.chartJson.config.showVerticalAxis&&this._toggle(this.verticalAxisToggle);this.chartJson.config.dateConfig&&this.chartJson.config.dateConfig.isNeedFilled&&this._toggle(this.withoutRecordsToggle)},
_toggle:function(b){l.hasClass(b,"toggle-on")?(l.removeClass(b,"toggle-on"),l.addClass(b,"toggle-off")):(l.removeClass(b,"toggle-off"),l.addClass(b,"toggle-on"))},_onToggleClick:function(b){var c=b.target;this._toggle(c);b=l.hasClass(c,"toggle-on")?!0:!1;c=l.attr(c,"data-id");"legend"===c?this.chartJson.config.showLegend=b:"dataLabels"===c?this.chartJson.config.showDataLabel=b:"horizontalAxis"===c?this.chartJson.config.showHorizontalAxis=b:"verticalAxis"===c?this.chartJson.config.showVerticalAxis=
b:"withoutRecords"===c&&this.chartJson.config.dateConfig&&(this.chartJson.config.dateConfig.isNeedFilled=b);this.chartDijit.setConfig(this.chartJson.config)}})})},"widgets/Infographic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/StatisticsChart.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader" style\x3d"margin-bottom:15px;"\x3e\r\n\t\t\x3cdiv class\x3d"chart-title jimu-float-leading" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"paging-section jimu-float-leading"\x3e\r\n\t\t\t\x3cul data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked"\x3e\x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"zoomin jimu-float-trailing" data-dojo-attach-point\x3d"zoominIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"settings jimu-float-trailing" data-dojo-attach-point\x3d"settingsIcon"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"chart-section"\x3e\r\n\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;table-layout:fixed;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"content-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer" dir\x3d"ltr"\r\n\t\t\t\t\t\tstyle\x3d"direction:ltr;overflow:hidden;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_StatisticsChartSettings.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisX" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisX" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisX"\x3e${nls.horizontalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisY" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisY" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisY"\x3e${nls.verticalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divPieLabel" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxPieLabel" type\x3d"checkbox" checked /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelPie"\x3e${nls.dataLabels}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cdiv class\x3d"color-tip"\x3e${nls.color}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleColorSection" class\x3d"single-color-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorDiv" class\x3d"single-color-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"paletteContainer" class\x3d"palette-container"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multiColorSection" class\x3d"multi-color-section"\x3e\r\n\t\t\t\x3cdiv class\x3d"colorful-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorfulContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"monochromatic-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monochromaticContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"shelter" data-dojo-attach-point\x3d"shelter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/_ChartSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"legendSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.legend}"\x3e${nls.legend}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"legendToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"legend"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"dataLabelsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.dataLabels}"\x3e${nls.dataLabels}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dataLabelsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"dataLabels"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"horizontalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.horizontalAxis}"\x3e${nls.horizontalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"horizontalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"horizontalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"verticalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.verticalAxis}"\x3e${nls.verticalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"verticalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"verticalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n   \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"withoutRecordsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.showPeriodsWithoutRecords}"\x3e${nls.showPeriodsWithoutRecords}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"withoutRecordsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"withoutRecords"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/Infographic/Widget.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\x3c/div\x3e',"url:widgets/Infographic/css/style.css":'@font-face {font-family: \'icomoon\'; src: url("fonts/icomoon.eot?oflavm"); src: url("fonts/icomoon.eot?oflavm#iefix") format(\'embedded-opentype\'), url("fonts/icomoon.ttf?oflavm") format(\'truetype\'), url("fonts/icomoon.woff?oflavm") format(\'woff\'), url("fonts/icomoon.svg?oflavm#icomoon") format(\'svg\'); font-weight: normal; font-style: normal;}.jimu-widget-infographic .indicator-icon,.jimu-widget-infographic-setting .indicator-icon {font-family: \'icomoon\' !important; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}.icon-like:before {content: "\\e900";}.icon-unlike:before {content: "\\e904";}.icon-stop:before {content: "\\e902";}.icon-danger:before {content: "\\e901";}.icon-star:before {content: "\\e903";}.icon-alarm:before {content: "\\e906";}.icon-down:before {content: "\\e909";}.icon-right:before {content: "\\e90f";}.icon-up:before {content: "\\e911";}.icon-wrong:before {content: "\\e912";}.lm_goldenlayout .lm_item .lm_content {position: relative;}.lm_goldenlayout .lm_item .lm_content .table-layout-container {display: table; table-layout: fixed; overflow: hidden; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .table-layout-container \x3e div {padding: 10px 15px;}.lm_goldenlayout .lm_item .lm_content .image-node {display: table-cell; overflow: hidden; position: relative; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .no-trim {white-space: pre-wrap;}.infographic-number-dijit {display: flex; justify-content: center; align-items: center;}.infographic-number-dijit .number-content .value-content {white-space: nowrap;}.infographic-number-dijit a,.infographic-number-dijit a:hover,.infographic-number-dijit a:visited,.infographic-number-dijit a:link,.infographic-number-dijit a:active {text-decoration: none;}.infographic-number-dijit.horizontal-left {justify-content: flex-start;}.infographic-number-dijit.horizontal-center {justify-content: center;}.infographic-number-dijit.horizontal-right {justify-content: flex-end;}.infographic-number-dijit.vertical-top {align-items: flex-start;}.infographic-number-dijit.vertical-middle {align-items: center;}.infographic-number-dijit.vertical-bottom {align-items: flex-end;}.infographic-number-dijit .number-content {display: flex; justify-content: center; max-width: 340px;}.infographic-number-dijit .number {display: flex; justify-content: space-between; align-items: baseline;}.infographic-number-dijit .indicator-icon {font-size: 22px; align-self: center; text-align: center;}.infographic-number-dijit .number .prefix {margin-right: 6px;}.infographic-number-dijit .number .suffix {margin-left: 6px;}.infographic-number-dijit .rightImgDiv {width: 35%; height: 100%; text-align: left;}.infographic-chart-dijit {position: relative;}.infographic-chart-dijit .no-data-tip {display: none; position: absolute; left: 0; right: 0; height: 30px; top: 50%; margin: -15px; text-align: center; color: #666;}.infographic-chart-dijit.no-data .no-data-tip {display: block; margin: 0 10px;}.jimu-widget-infographic {position: relative; width: 100%; height: 100%;}.jimu-widget-infographic .chart-setting {position: absolute; top: 0; right: 0; cursor: pointer; width: 16px; height: 16px; background: no-repeat center center url(images/chart-setting.svg); z-index: 1;}.ig-chart-setting-dlg .jimu-leading-margin10 {margin-left: 10px; margin-right: 0;}.jimu-rtl .ig-chart-setting-dlg .jimu-leading-margin10 {margin-right: 10px; margin-left: 0;}.ig-chart-setting-dlg .textOverFlow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.ig-chart-setting-dlg .flex {display: flex; justify-content: space-between; margin-top: 8px;}.ig-chart-setting-dlg .label {width: 120px;}.ig-chart-setting-dlg .toggle {width: 38px; height: 18px; cursor: pointer;}.ig-chart-setting-dlg .toggle.toggle-on {background: no-repeat center left url(./images/Toggle_On.svg);}.ig-chart-setting-dlg .toggle.toggle-off {background: no-repeat center left url(./images/Toggle_Off.svg);}',
"*now":function(q){q(['dojo/i18n!*preload*widgets/Infographic/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dijit/_WidgetsInTemplateMixin dijit/popup dijit/TooltipDialog jimu/BaseWidget jimu/dijit/GridLayout jimu/DataSourceManager jimu/LayerInfos/LayerInfos jimu/utils ./DijitFactory ./dijits/utils ./_ChartSetting".split(" "),function(q,l,k,n,b,c,g,f,m,h,a,d,e,p,r,A){return q([m,c],{name:"Infographic",baseClass:"jimu-widget-infographic",dijits:null,clientFeaturesHandle:null,layerInfosObj:null,postCreate:function(){this.inherited(arguments);
this.dijits=[];this.layerInfosObj=d.getInstanceSync();p.setNls(this.nls);p.setMap(this.map);p.setInSettingPage(!1);p.setAppConfig(this.appConfig);p.setContext({folderUrl:this.folderUrl});this.on("click",l.hitch(this,function(){this.chartSettingDialog&&g.close(this.chartSettingDialog)}));this._features=[]},startup:function(){this.inherited(arguments);this._createUI();this._createChartSettingBtn()},onOpen:function(){if(this.config.dataSource)if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===this.config.dataSource.dataSourceType){var b=
this.layerInfosObj.getLayerInfoById(this.config.dataSource.layerId);b&&b.getLayerObject().then(l.hitch(this,function(a){a&&(this.clientFeaturesHandle=r.listenClientFeaturesFromMap(this.map,a,this.config.dataSource.useSelection,this.config.dataSource.filterByExtent,l.hitch(this,this._onClientFeaturesUpdate)))}))}else"DATA_SOURCE_FROM_FRAMEWORK"===this.config.dataSource.dataSourceType&&(b=a.getInstance().getData(this.config.dataSource.frameWorkDsId))&&this._onDataUpdate(b)},onClose:function(){this._releaseHanlde();
this.chartSettingDialog&&this.chartSettingDialog.isShow&&(g.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1)},destroy:function(){this._releaseHanlde();this.chartSettingDialog&&(this.chartSettingDialog.destroy(),this.chartSettingDialog=null);this.inherited(arguments)},_releaseHanlde:function(){this.clientFeaturesHandle&&this.clientFeaturesHandle.remove();this.clientFeaturesHandle=null},_createUI:function(){if(this.config.layout){k.forEach(this.dijits,l.hitch(this,function(a){a.destroy()}));
this.dijits=[];var a=k.map(this.config.dijits,function(a){var b=p.createDijit(a);b.setDataSource(this.config.dataSource);this.dijits.push(b);return{id:a.id,dijit:b}},this);this.layout=new h({components:a,layoutDefinition:this.config.layout.definition,container:this.domNode,editable:!1});this.layout.on("initialised",l.hitch(this,function(){k.forEach(this.dijits,l.hitch(this,function(a){a.startup()}))}))}},_createChartSettingBtn:function(){this.config.dijits&&k.some(this.config.dijits,function(a){return a.visible&&
"chart"===a.type},this)&&(this.chartSettingNode=n.create("div",{"class":"chart-setting"},this.domNode),this.own(b(this.chartSettingNode,"click",l.hitch(this,this._onChartSettingClick))),this.chartSettingDialog=new f({content:this._createChartSettingContent()}),this.chartSettingDialog.isShow=!1)},_onChartSettingClick:function(a){this.chartSettingDialog.isShow?(g.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1):(g.open({popup:this.chartSettingDialog,around:this.chartSettingNode}),this.chartSettingDialog.isShow=
!0);a.stopPropagation()},_createChartSettingContent:function(){var a=k.filter(this.config.dijits,function(a){return"chart"===a.type})[0];return a?a.config?(new A({chartJson:a,chartDijit:k.filter(this.dijits,function(b){return b.jsonId===a.id})[0],nls:this.nls})).domNode:"\x3cdiv\x3e\x3c/div\x3e":(console.error("Unknow error"),"\x3cdiv\x3e\x3c/div\x3e")},onDataSourceDataUpdate:function(a,b){this.config.dataSource&&a===this.config.dataSource.frameWorkDsId&&(b.features=r.filterFeaturesByDataSourceSetting(b.features,
this.config.dataSource,this.map),this._onDataUpdate(b))},_onClientFeaturesUpdate:function(a){this._onDataUpdate({features:a})},_onDataUpdate:function(a){var b=k.map(this._features,function(a){return a.attributes}),c=k.map(a.features,function(a){return a.attributes});e.isEqual(b,c)||(this._features=a.features,k.forEach(this.dijits,l.hitch(this,function(b){b.onDataSourceDataUpdate(a)})))},resize:function(){this.inherited(arguments);this.layout&&this.layout.resize()}})});